/*!
 * gulp-nunjucks-sass-template
 * A Gulp 4 template including SCSS, Nunjucks, JS and more
 *
 * Url: https://github.com/DefaultSimon
 * Author: Simon GoriÄar
 * Copyright 2019-2020. MIT licensed.
 */
document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".header_tags .tag");let t,o,n=[];function i(){if(console.log(window.innerWidth>=1024,window.innerWidth>window.innerHeight),document.querySelector(".compilation")){let e,t,o,n=document.querySelectorAll(".compilation .item");window.innerWidth<1024&&window.innerWidth<window.innerHeight?(e=n[0].querySelector(".item_image").offsetWidth,t=e/2*3,Array.prototype.forEach.call(n,function(e){e.querySelector(".item_image").style.height=t+"px"})):(e=n[0].offsetWidth,n[0].classList.contains("wide")?t=(e-40)/151*106:(t=(e-40)/53*76,console.log(e)),Array.prototype.forEach.call(n,function(e){let n=e.querySelector(".item_image");o=e.querySelector(".item_tags"),n.style.height=t+"px",o.style.top=t+"px"}))}function i(e,t){t.onclick=(()=>new function(){e.classList.toggle("open")})}if(document.querySelector("#copyLink")&&document.querySelector("#copyLink").addEventListener("click",()=>{let e=document.createElement("input"),t=window.location.href;document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}),document.querySelector(".header_tags")){let i=document.querySelector(".header_tags"),c=document.querySelector(".header_tags .tag_list"),l=document.querySelector(".header_tags .tag-wrapper"),s=0,a=i.offsetWidth,d=l.offsetWidth,u=0,f=Array.prototype.slice.call(e),y=n.slice();function r(e){if(u=d-24,document.querySelector(".header_tags .tag.current"))do{u+=y[e],e++}while(u<=a-d-24-26&&e<f.length);else do{u+=y[e],e++}while(u<=a-d-24&&e<f.length);return e}s=r(s);let g=document.querySelectorAll(".header_tags .tag");if(t){if(o()>s){let e=y[o()];f.splice(o(),1),y.splice(o(),1);let n=s-1;f.splice(n,0,t),y.splice(n,0,e)}s=r(s=0)}Array.prototype.forEach.call(g,function(e){e.remove()});for(let e=0;e<s;e++)l.before(f[e]);for(let e=s;e<f.length;e++)c.append(f[e]);i.style.flexWrap="nowrap"}if(document.querySelector(".header_tags")){const e=document.querySelector(".header_menu"),t=e.querySelector(".menu"),o=e.querySelector(".btn-icon");new i(t,o);const n=document.querySelector(".header_language"),r=n.querySelector(".language"),c=n.querySelector(".btn-icon");new i(r,c);const l=document.querySelector(".header_notification"),s=l.querySelector(".notification"),a=l.querySelector(".btn-icon");new i(s,a);const d=document.querySelector(".header_tags .tag-wrapper"),u=d.querySelector(".tag_list"),f=d.querySelector(".tag-button");new i(u,f),document.onclick=(e=>{let n=e.target,i=n===t||t.contains(n),l=n===o,d=t.classList.contains("open"),y=n===r||r.contains(n),g=n===c,h=r.classList.contains("open"),p=n===s||s.contains(n),m=n===a,w=s.classList.contains("open"),q=n===u||u.contains(n),S=n===f,_=u.classList.contains("open");i||l||!d||t.classList.toggle("open"),y||g||!h||r.classList.toggle("open"),p||m||!w||s.classList.toggle("open"),q||S||!_||u.classList.toggle("open")})}let c=document.querySelector(".article"),l=document.querySelector(".article_image");if(c)if(window.innerWidth>=1024&&window.innerWidth>window.innerHeight){let e,t,o=document.querySelector(".article_image-picture"),n=document.querySelector(".article_image-caption");console.log(c.offsetWidth/2,c.querySelector(".wrapper").offsetWidth,l.offsetHeight+80>window.innerHeight),c.offsetWidth/2<c.querySelector(".wrapper").offsetWidth&&c.offsetWidth<1100?(l.offsetHeight+80>window.innerHeight?(o.style.height=l.offsetHeight-n.offsetHeight+"px",t=(e=o.offsetHeight)/153*102):e=(t=c.offsetWidth/2-120)/102*153,l.style.width=t+"px",document.querySelector(".article").style.paddingLeft=t+40+"px"):(l.offsetHeight+80>window.innerHeight&&(o.style.height=l.offsetHeight-n.offsetHeight+"px"),t=(e=o.offsetHeight)/153*102,l.style.width=t+"px",document.querySelector(".article").style.paddingLeft=t+40+"px");let i=0,r=0;document.onscroll=function(){if(document.querySelector(".article")){let e,t=document.querySelector("section.article").offsetHeight,o=document.querySelector(".header").offsetHeight,n=document.querySelector(".banners_container"),c=n.offsetHeight,s=document.querySelector(".banners_wrapper").offsetHeight,a=document.querySelector(".content").offsetHeight,d=pageYOffset-i;c-s>0&&(r+=e=d/(a/(c-s+48)),n.style.transform="translateY("+-1*r+"px)"),pageYOffset>40&&pageYOffset<t+o-l.offsetHeight-100?(l.style.position="fixed",l.style.top="40px",l.style.bottom="auto",l.style.width=l.offsetWidth+"px"):pageYOffset>40&&pageYOffset>t+o-l.offsetHeight-100?(l.style.position="absolute",l.style.top="auto",l.style.bottom="80px",l.style.width=l.offsetWidth+"px"):(l.style.position="absolute",l.style.top="40px",l.style.bottom="auto",l.style.width=l.offsetWidth+"px"),i=pageYOffset}}}else document.querySelector(".article").style.paddingLeft="16px"}document.querySelector(".header_tags")&&(Array.prototype.forEach.call(e,function(e){n.push(e.offsetWidth+12)}),t=document.querySelector(".header_tags .tag.current"),o=function(){if(null!==t)return Array.prototype.slice.call(e).indexOf(t)}),new i,window.onresize=i});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidGFnc0xpc3REZWZhdWx0IiwicXVlcnlTZWxlY3RvckFsbCIsImN1cnJlbnRUYWciLCJjdXJyZW50VGFnSW5kZXgiLCJ0YWdzV2lkdGhMaXN0RGVmYXVsdCIsIlN0YXJ0U2NyaXB0cyIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJxdWVyeVNlbGVjdG9yIiwiaXRlbVdpZHRoIiwiaW1hZ2VIZWlnaHQiLCJpdGVtVGFncyIsIml0ZW1zT25QYWdlIiwib2Zmc2V0V2lkdGgiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsIiwiZWxlbSIsInN0eWxlIiwiaGVpZ2h0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbWFnZSIsInRvcCIsIlRvZ2dsZUJsb2NrIiwiYmxvY2siLCJidXR0b24iLCJvbmNsaWNrIiwidG9nZ2xlIiwiZHVtbXkiLCJjcmVhdGVFbGVtZW50IiwidGV4dCIsImxvY2F0aW9uIiwiaHJlZiIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInZhbHVlIiwic2VsZWN0IiwiZXhlY0NvbW1hbmQiLCJyZW1vdmVDaGlsZCIsInRhZ05hdiIsInRhZ01vcmVMaXN0IiwidGFnTW9yZUJ1dHRvbiIsImkiLCJ0YWdOYXZXaWR0aCIsInRhZ01vcmVCdXR0b25XaWR0aCIsInRhZ3NWaXNpYmxlV2lkdGgiLCJ0YWdzTGlzdCIsInNsaWNlIiwidGFnc1dpZHRoTGlzdCIsIkZpbmRUYWdzVmlzaWJsZVdpZHRoIiwiaW5kZXgiLCJsZW5ndGgiLCJhbGxOYXZUYWdzIiwiY3VycmVudFRhZ1dpZHRoIiwic3BsaWNlIiwiayIsInJlbW92ZSIsImIiLCJiZWZvcmUiLCJsIiwiYXBwZW5kIiwiZmxleFdyYXAiLCJtZW51V3JhcHBlciIsIm1lbnUiLCJtZW51QnV0dG9uIiwibGFuZ3VhZ2VXcmFwcGVyIiwibGFuZ3VhZ2UiLCJsYW5ndWFnZUJ1dHRvbiIsIm5vdGlmaWNhdGlvbldyYXBwZXIiLCJub3RpZmljYXRpb24iLCJub3RpZmljYXRpb25CdXR0b24iLCJuYXZXcmFwcGVyIiwibmF2TGlzdCIsIm5hdkJ1dHRvbiIsImUiLCJ0YXJnZXQiLCJpdHNNZW51IiwiaXRzTWVudUJ1dHRvbiIsIm1lbnVJc0FjdGl2ZSIsIml0c0xhbmd1YWdlIiwiaXRzTGFuZ3VhZ2VCdXR0b24iLCJsYW5ndWFnZUlzQWN0aXZlIiwiaXRzTm90aWZpY2F0aW9uIiwiaXRzTm90aWZpY2F0aW9uQnV0dG9uIiwibm90aWZpY2F0aW9uSXNBY3RpdmUiLCJpdHNMaXN0IiwiaXRzTGlzdEJ1dHRvbiIsImxpc3RJc0FjdGl2ZSIsImFydGljbGUiLCJhcnRpY2xlSW1hZ2UiLCJwaWN0dXJlSGVpZ2h0IiwicGljdHVyZVdpZHRoIiwicGljdHVyZSIsImNhcHRpb24iLCJvZmZzZXRIZWlnaHQiLCJ3aWR0aCIsInBhZGRpbmdMZWZ0IiwiY3VycmVudFBhZ2VZUG9zaXRpb24iLCJiYW5uZXJzU2Nyb2xsIiwib25zY3JvbGwiLCJiYW5uZXJzU2Nyb2xsTmV3IiwiYXJ0aWNsZUhlaWdodCIsImhlYWRlckhlaWdodCIsImJhbm5lcnNDb250YWluZXIiLCJiYW5uZXJzQ29udGFpbmVySGVpZ2h0IiwiYmFubmVyc1dyYXBwZXJIZWlnaHQiLCJjb250ZW50SGVpZ2h0Iiwic2Nyb2xsRGlmZmVyZW5jZSIsInBhZ2VZT2Zmc2V0IiwidHJhbnNmb3JtIiwicG9zaXRpb24iLCJib3R0b20iLCJwdXNoIiwiaW5kZXhPZiIsIm9ucmVzaXplIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBQSxTQUFBQyxpQkFBQSxtQkFBQSxXQUNBLE1BQUFDLEVBQUFGLFNBQUFHLGlCQUFBLHFCQUNBLElBQUFDLEVBQUFDLEVBQUFDLEtBS0EsU0FBQUMsSUFHQSxHQUZBQyxRQUFBQyxJQUFBQyxPQUFBQyxZQUFBLEtBQUFELE9BQUFDLFdBQUFELE9BQUFFLGFBRUFaLFNBQUFhLGNBQUEs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QkFDQVIsRUFBQSxXQUNBLEdBQUEsT0FBQUQsRUFDQSxPQUFBZSxNQUFBQyxVQUFBa0MsTUFBQWhDLEtBQUFwQixHQUFBc0gsUUFBQXBILEtBaU9BLElBQUFHLEVBRUFHLE9BQUErRyxTQUFBbEgiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyDQkNC90LDQu9C+0LMgJChkb2N1bWVudCkucmVhZHkoKVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICBjb25zdCB0YWdzTGlzdERlZmF1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVhZGVyX3RhZ3MgLnRhZycpO1xuICBsZXQgdGFnc1dpZHRoTGlzdERlZmF1bHQgPSBbXSwgY3VycmVudFRhZywgY3VycmVudFRhZ0luZGV4O1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzJykpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRhZ3NMaXN0RGVmYXVsdCwgZnVuY3Rpb24oZWxlbSkge1xuICAgICAgdGFnc1dpZHRoTGlzdERlZmF1bHQucHVzaCggZWxlbS5vZmZzZXRXaWR0aCArIDEyICk7XG4gICAgfSk7XG4gICAgY3VycmVudFRhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncyAudGFnLmN1cnJlbnQnKTtcbiAgICBjdXJyZW50VGFnSW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChjdXJyZW50VGFnICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0YWdzTGlzdERlZmF1bHQpLmluZGV4T2YoY3VycmVudFRhZyk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFN0YXJ0U2NyaXB0cygpIHtcbiAgICBjb25zb2xlLmxvZygod2luZG93LmlubmVyV2lkdGggPj0gMTAyNCksICh3aW5kb3cuaW5uZXJXaWR0aCA+IHdpbmRvdy5pbm5lckhlaWdodCkpO1xuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21waWxhdGlvbicpKSB7XG4gICAgICBsZXQgaXRlbXNPblBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29tcGlsYXRpb24gLml0ZW0nKSwgaXRlbVdpZHRoLCBpbWFnZUhlaWdodCwgaXRlbVRhZ3M7XG4gICAgICBpZiAoKHdpbmRvdy5pbm5lcldpZHRoIDwgMTAyNCkgJiYgKHdpbmRvdy5pbm5lcldpZHRoIDwgd2luZG93LmlubmVySGVpZ2h0KSkgeyAvL3BvcnRyYWl0XG4gICAgICAgIGl0ZW1XaWR0aCA9IGl0ZW1zT25QYWdlWzBdLnF1ZXJ5U2VsZWN0b3IoJy5pdGVtX2ltYWdlJykub2Zmc2V0V2lkdGg7XG4gICAgICAgIGltYWdlSGVpZ2h0ID0gaXRlbVdpZHRoIC8gMiAqIDM7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoaXRlbXNPblBhZ2UsIGZ1bmN0aW9uKGVsZW0pe1xuICAgICAgICAgIGxldCBpbWFnZSA9IGVsZW0ucXVlcnlTZWxlY3RvcignLml0ZW1faW1hZ2UnKTtcbiAgICAgICAgICBpbWFnZS5zdHlsZS5oZWlnaHQgPSBpbWFnZUhlaWdodCArICdweCc7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbVdpZHRoID0gaXRlbXNPblBhZ2VbMF0ub2Zmc2V0V2lkdGg7XG4gICAgICAgIGlmIChpdGVtc09uUGFnZVswXS5jbGFzc0xpc3QuY29udGFpbnMoJ3dpZGUnKSkge1xuICAgICAgICAgIGltYWdlSGVpZ2h0ID0gKGl0ZW1XaWR0aCAtIDQwKSAvIDE1MSAqIDEwNjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbWFnZUhlaWdodCA9IChpdGVtV2lkdGggLSA0MCkgLyA1MyAqIDc2O1xuICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW1XaWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtc09uUGFnZSwgZnVuY3Rpb24oZWxlbSl7XG4gICAgICAgICAgbGV0IGltYWdlID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuaXRlbV9pbWFnZScpO1xuICAgICAgICAgIGl0ZW1UYWdzID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuaXRlbV90YWdzJyk7XG4gICAgICAgICAgaW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gaW1hZ2VIZWlnaHQgKyAncHgnO1xuICAgICAgICAgIGl0ZW1UYWdzLnN0eWxlLnRvcCA9IGltYWdlSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3B5TGluaycpKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29weUxpbmsnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbGV0IGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSxcbiAgICAgICAgICAgIHRleHQgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGR1bW15KTtcbiAgICAgICAgZHVtbXkudmFsdWUgPSB0ZXh0O1xuICAgICAgICBkdW1teS5zZWxlY3QoKTtcbiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkdW1teSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBUb2dnbGVCbG9jayhibG9jaywgYnV0dG9uKSB7XG4gICAgICBsZXQgVG9nZ2xlTWVudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBibG9jay5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICB9O1xuICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiAobmV3IFRvZ2dsZU1lbnUoKSk7XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncycpKSB7XG4gICAgICBsZXQgdGFnTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzJyksXG4gICAgICAgICAgdGFnTW9yZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MgLnRhZ19saXN0JyksXG4gICAgICAgICAgdGFnTW9yZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncyAudGFnLXdyYXBwZXInKSxcbiAgICAgICAgICBpID0gMCxcbiAgICAgICAgICB0YWdOYXZXaWR0aCA9IHRhZ05hdi5vZmZzZXRXaWR0aCxcbiAgICAgICAgICB0YWdNb3JlQnV0dG9uV2lkdGggPSB0YWdNb3JlQnV0dG9uLm9mZnNldFdpZHRoLFxuICAgICAgICAgIHRhZ3NWaXNpYmxlV2lkdGggPSAwLFxuICAgICAgICAgIHRhZ3NMaXN0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGFnc0xpc3REZWZhdWx0KSxcbiAgICAgICAgICB0YWdzV2lkdGhMaXN0ID0gdGFnc1dpZHRoTGlzdERlZmF1bHQuc2xpY2UoKTtcbiAgICAgIGZ1bmN0aW9uIEZpbmRUYWdzVmlzaWJsZVdpZHRoKGluZGV4KSB7XG4gICAgICAgIHRhZ3NWaXNpYmxlV2lkdGggPSB0YWdNb3JlQnV0dG9uV2lkdGggLSAyNDtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncyAudGFnLmN1cnJlbnQnKSkge1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIHRhZ3NWaXNpYmxlV2lkdGggPSB0YWdzVmlzaWJsZVdpZHRoICsgdGFnc1dpZHRoTGlzdFtpbmRleF07XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgIH0gd2hpbGUgKCh0YWdzVmlzaWJsZVdpZHRoIDw9ICh0YWdOYXZXaWR0aCAtIHRhZ01vcmVCdXR0b25XaWR0aCAtIDI0IC0gMjYpKSAmJiAoaW5kZXggPCB0YWdzTGlzdC5sZW5ndGgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICB0YWdzVmlzaWJsZVdpZHRoID0gdGFnc1Zpc2libGVXaWR0aCArIHRhZ3NXaWR0aExpc3RbaW5kZXhdO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICB9IHdoaWxlICgodGFnc1Zpc2libGVXaWR0aCA8PSAodGFnTmF2V2lkdGggLSB0YWdNb3JlQnV0dG9uV2lkdGggLSAyNCkpICYmIChpbmRleCA8IHRhZ3NMaXN0Lmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIGkgPSBGaW5kVGFnc1Zpc2libGVXaWR0aChpKTtcbiAgICAgIGxldCBhbGxOYXZUYWdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl90YWdzIC50YWcnKTtcbiAgICAgIGlmIChjdXJyZW50VGFnKSB7XG4gICAgICAgIGlmIChjdXJyZW50VGFnSW5kZXgoKSA+IGkpIHtcbiAgICAgICAgICBsZXQgY3VycmVudFRhZ1dpZHRoID0gdGFnc1dpZHRoTGlzdFtjdXJyZW50VGFnSW5kZXgoKV07XG4gICAgICAgICAgdGFnc0xpc3Quc3BsaWNlKGN1cnJlbnRUYWdJbmRleCgpLCAxKTtcbiAgICAgICAgICB0YWdzV2lkdGhMaXN0LnNwbGljZShjdXJyZW50VGFnSW5kZXgoKSwgMSk7XG4gICAgICAgICAgbGV0IGsgPSBpIC0gMTtcbiAgICAgICAgICB0YWdzTGlzdC5zcGxpY2UoaywgMCwgY3VycmVudFRhZyk7XG4gICAgICAgICAgdGFnc1dpZHRoTGlzdC5zcGxpY2UoaywgMCwgY3VycmVudFRhZ1dpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBpID0gMDtcbiAgICAgICAgaSA9IEZpbmRUYWdzVmlzaWJsZVdpZHRoKGkpO1xuICAgICAgfVxuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhbGxOYXZUYWdzLCBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBmb3IgKGxldCBiID0gMDsgYiA8IGk7IGIrKykge1xuICAgICAgICB0YWdNb3JlQnV0dG9uLmJlZm9yZSh0YWdzTGlzdFtiXSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBsID0gaTsgbCA8IHRhZ3NMaXN0Lmxlbmd0aDsgbCsrKSB7XG4gICAgICAgIHRhZ01vcmVMaXN0LmFwcGVuZCh0YWdzTGlzdFtsXSk7XG4gICAgICB9XG4gICAgICB0YWdOYXYuc3R5bGUuZmxleFdyYXAgPSAnbm93cmFwJztcbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzJykpIHtcbiAgICAgIGNvbnN0IG1lbnVXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9tZW51JyksXG4gICAgICAgICAgICBtZW51ID0gbWVudVdyYXBwZXIucXVlcnlTZWxlY3RvcignLm1lbnUnKSxcbiAgICAgICAgICAgIG1lbnVCdXR0b24gPSBtZW51V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuYnRuLWljb24nKTtcbiAgICAgIG5ldyBUb2dnbGVCbG9jayhtZW51LCBtZW51QnV0dG9uKTtcbiAgICAgIGNvbnN0IGxhbmd1YWdlV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbGFuZ3VhZ2UnKSxcbiAgICAgICAgICAgIGxhbmd1YWdlID0gbGFuZ3VhZ2VXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5sYW5ndWFnZScpLFxuICAgICAgICAgICAgbGFuZ3VhZ2VCdXR0b24gPSBsYW5ndWFnZVdyYXBwZXIucXVlcnlTZWxlY3RvcignLmJ0bi1pY29uJyk7XG4gICAgICBuZXcgVG9nZ2xlQmxvY2sobGFuZ3VhZ2UsIGxhbmd1YWdlQnV0dG9uKTtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX25vdGlmaWNhdGlvbicpLFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcubm90aWZpY2F0aW9uJyksXG4gICAgICAgICAgICBub3RpZmljYXRpb25CdXR0b24gPSBub3RpZmljYXRpb25XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5idG4taWNvbicpO1xuICAgICAgbmV3IFRvZ2dsZUJsb2NrKG5vdGlmaWNhdGlvbiwgbm90aWZpY2F0aW9uQnV0dG9uKTtcbiAgICAgIGNvbnN0IG5hdldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MgLnRhZy13cmFwcGVyJyksXG4gICAgICAgIG5hdkxpc3QgPSBuYXZXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy50YWdfbGlzdCcpLFxuICAgICAgICBuYXZCdXR0b24gPSBuYXZXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy50YWctYnV0dG9uJyk7XG4gICAgICBuZXcgVG9nZ2xlQmxvY2sobmF2TGlzdCwgbmF2QnV0dG9uKTtcblxuICAgICAgZG9jdW1lbnQub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldCxcbiAgICAgICAgICBpdHNNZW51ID0gdGFyZ2V0ID09PSBtZW51IHx8IG1lbnUuY29udGFpbnModGFyZ2V0KSxcbiAgICAgICAgICBpdHNNZW51QnV0dG9uID0gdGFyZ2V0ID09PSBtZW51QnV0dG9uLFxuICAgICAgICAgIG1lbnVJc0FjdGl2ZSA9IG1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJyksXG4gICAgICAgICAgaXRzTGFuZ3VhZ2UgPSB0YXJnZXQgPT09IGxhbmd1YWdlIHx8IGxhbmd1YWdlLmNvbnRhaW5zKHRhcmdldCksXG4gICAgICAgICAgaXRzTGFuZ3VhZ2VCdXR0b24gPSB0YXJnZXQgPT09IGxhbmd1YWdlQnV0dG9uLFxuICAgICAgICAgIGxhbmd1YWdlSXNBY3RpdmUgPSBsYW5ndWFnZS5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSxcbiAgICAgICAgICBpdHNOb3RpZmljYXRpb24gPSB0YXJnZXQgPT09IG5vdGlmaWNhdGlvbiB8fCBub3RpZmljYXRpb24uY29udGFpbnModGFyZ2V0KSxcbiAgICAgICAgICBpdHNOb3RpZmljYXRpb25CdXR0b24gPSB0YXJnZXQgPT09IG5vdGlmaWNhdGlvbkJ1dHRvbixcbiAgICAgICAgICBub3RpZmljYXRpb25Jc0FjdGl2ZSA9IG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSxcbiAgICAgICAgICBpdHNMaXN0ID0gdGFyZ2V0ID09PSBuYXZMaXN0IHx8IG5hdkxpc3QuY29udGFpbnModGFyZ2V0KSxcbiAgICAgICAgICBpdHNMaXN0QnV0dG9uID0gdGFyZ2V0ID09PSBuYXZCdXR0b24sXG4gICAgICAgICAgbGlzdElzQWN0aXZlID0gbmF2TGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKTtcblxuICAgICAgICBpZiAoIWl0c01lbnUgJiYgIWl0c01lbnVCdXR0b24gJiYgbWVudUlzQWN0aXZlKSB7XG4gICAgICAgICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpdHNMYW5ndWFnZSAmJiAhaXRzTGFuZ3VhZ2VCdXR0b24gJiYgbGFuZ3VhZ2VJc0FjdGl2ZSkge1xuICAgICAgICAgIGxhbmd1YWdlLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWl0c05vdGlmaWNhdGlvbiAmJiAhaXRzTm90aWZpY2F0aW9uQnV0dG9uICYmIG5vdGlmaWNhdGlvbklzQWN0aXZlKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWl0c0xpc3QgJiYgIWl0c0xpc3RCdXR0b24gJiYgbGlzdElzQWN0aXZlKSB7XG4gICAgICAgICAgbmF2TGlzdC5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgbGV0IGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZScpLFxuICAgICAgICBhcnRpY2xlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZV9pbWFnZScpO1xuICAgIGlmIChhcnRpY2xlKSB7XG4gICAgICBpZiAoKHdpbmRvdy5pbm5lcldpZHRoID49IDEwMjQpICYmICh3aW5kb3cuaW5uZXJXaWR0aCA+IHdpbmRvdy5pbm5lckhlaWdodCkpIHtcbiAgICAgICAgbGV0IHBpY3R1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZV9pbWFnZS1waWN0dXJlJyksXG4gICAgICAgICAgY2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlX2ltYWdlLWNhcHRpb24nKSxcbiAgICAgICAgICBwaWN0dXJlSGVpZ2h0LCBwaWN0dXJlV2lkdGg7XG4gICAgICAgIGNvbnNvbGUubG9nKGFydGljbGUub2Zmc2V0V2lkdGggLyAyLCBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy53cmFwcGVyJykub2Zmc2V0V2lkdGgsIChhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0ICsgODApID4gd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgaWYgKCgoYXJ0aWNsZS5vZmZzZXRXaWR0aCAvIDIpIDwgKGFydGljbGUucXVlcnlTZWxlY3RvcignLndyYXBwZXInKS5vZmZzZXRXaWR0aCkpICYmIChhcnRpY2xlLm9mZnNldFdpZHRoIDwgMTEwMCkpIHtcbiAgICAgICAgICBpZiAoKGFydGljbGVJbWFnZS5vZmZzZXRIZWlnaHQgKyA4MCkgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgICAgICAgIHBpY3R1cmUuc3R5bGUuaGVpZ2h0ID0gKGFydGljbGVJbWFnZS5vZmZzZXRIZWlnaHQgLSBjYXB0aW9uLm9mZnNldEhlaWdodCkgKyAncHgnO1xuICAgICAgICAgICAgcGljdHVyZUhlaWdodCA9IHBpY3R1cmUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgcGljdHVyZVdpZHRoID0gcGljdHVyZUhlaWdodCAvIDE1MyAqIDEwMjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGljdHVyZVdpZHRoID0gKGFydGljbGUub2Zmc2V0V2lkdGggLyAyKSAtIDEyMDtcbiAgICAgICAgICAgIHBpY3R1cmVIZWlnaHQgPSBwaWN0dXJlV2lkdGggLyAxMDIgKiAxNTM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9IHBpY3R1cmVXaWR0aCArICdweCc7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKS5zdHlsZS5wYWRkaW5nTGVmdCA9IHBpY3R1cmVXaWR0aCArIDQwICsgJ3B4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoKGFydGljbGVJbWFnZS5vZmZzZXRIZWlnaHQgKyA4MCkgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgICAgICAgIHBpY3R1cmUuc3R5bGUuaGVpZ2h0ID0gKGFydGljbGVJbWFnZS5vZmZzZXRIZWlnaHQgLSBjYXB0aW9uLm9mZnNldEhlaWdodCkgKyAncHgnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwaWN0dXJlSGVpZ2h0ID0gcGljdHVyZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgcGljdHVyZVdpZHRoID0gcGljdHVyZUhlaWdodCAvIDE1MyAqIDEwMjtcbiAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUud2lkdGggPSBwaWN0dXJlV2lkdGggKyAncHgnO1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlJykuc3R5bGUucGFkZGluZ0xlZnQgPSBwaWN0dXJlV2lkdGggKyA0MCArICdweCc7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1cnJlbnRQYWdlWVBvc2l0aW9uID0gMCwgYmFubmVyc1Njcm9sbCA9IDA7XG4gICAgICAgIGRvY3VtZW50Lm9uc2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZScpKSB7XG4gICAgICAgICAgICBsZXQgYXJ0aWNsZUhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlY3Rpb24uYXJ0aWNsZScpLm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgICAgaGVhZGVySGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpLm9mZnNldEhlaWdodDtcblxuICAgICAgICAgICAgbGV0IGJhbm5lcnNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFubmVyc19jb250YWluZXInKSxcbiAgICAgICAgICAgICAgYmFubmVyc0NvbnRhaW5lckhlaWdodCA9IGJhbm5lcnNDb250YWluZXIub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICBiYW5uZXJzV3JhcHBlckhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW5uZXJzX3dyYXBwZXInKS5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgIGNvbnRlbnRIZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpLm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgICAgYmxvY2tzRGlmZmVyZW5jZSA9IChjb250ZW50SGVpZ2h0KSAvIChiYW5uZXJzQ29udGFpbmVySGVpZ2h0IC0gYmFubmVyc1dyYXBwZXJIZWlnaHQgKyA0OCksXG4gICAgICAgICAgICAgIHNjcm9sbERpZmZlcmVuY2UgPSBwYWdlWU9mZnNldCAtIGN1cnJlbnRQYWdlWVBvc2l0aW9uLCBiYW5uZXJzU2Nyb2xsTmV3O1xuICAgICAgICAgICAgaWYgKChiYW5uZXJzQ29udGFpbmVySGVpZ2h0IC0gYmFubmVyc1dyYXBwZXJIZWlnaHQpID4gMCkge1xuICAgICAgICAgICAgICBiYW5uZXJzU2Nyb2xsTmV3ID0gc2Nyb2xsRGlmZmVyZW5jZSAvIGJsb2Nrc0RpZmZlcmVuY2U7XG4gICAgICAgICAgICAgIGJhbm5lcnNTY3JvbGwgPSBiYW5uZXJzU2Nyb2xsICsgYmFubmVyc1Njcm9sbE5ldztcbiAgICAgICAgICAgICAgYmFubmVyc0NvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgnICsgKGJhbm5lcnNTY3JvbGwgKiAtMSkgKyAncHgpJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKChwYWdlWU9mZnNldCA+IDQwKSAmJiAocGFnZVlPZmZzZXQgPCAoYXJ0aWNsZUhlaWdodCArIGhlYWRlckhlaWdodCAtIGFydGljbGVJbWFnZS5vZmZzZXRIZWlnaHQgLSAxMDApKSkge1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUudG9wID0gJzQwcHgnO1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUuYm90dG9tID0gJ2F1dG8nO1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUud2lkdGggPSBhcnRpY2xlSW1hZ2Uub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgocGFnZVlPZmZzZXQgPiA0MCkgJiYgKHBhZ2VZT2Zmc2V0ID4gKGFydGljbGVIZWlnaHQgKyBoZWFkZXJIZWlnaHQgLSBhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0IC0gMTAwKSkpIHtcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnRvcCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLmJvdHRvbSA9ICc4MHB4JztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLndpZHRoID0gYXJ0aWNsZUltYWdlLm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS50b3AgPSAnNDBweCc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS5ib3R0b20gPSAnYXV0byc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9IGFydGljbGVJbWFnZS5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1cnJlbnRQYWdlWVBvc2l0aW9uID0gcGFnZVlPZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcxNnB4JztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBuZXcgU3RhcnRTY3JpcHRzKCk7XG5cbiAgd2luZG93Lm9ucmVzaXplID0gU3RhcnRTY3JpcHRzO1xufSk7XG5cblxuLy8gLy8g0JXRgdC70Lgg0LTQvtC70LbQtdC9INCx0YvRgtGMINC90LDQudC00LXQvSDQvtC00LjQvSDRjdC70LXQvNC10L3RglxuLy8gaWYoKGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1cIikpICE9PSBudWxsKVxuLy8gICBlLmNsYXNzTGlzdC5hZGQoJ2xhc3QnKTsgLy8g0JDQvdCw0LvQvtCzINCy0YvQsdC+0YDQutC4INC4INC/0YDQuNGB0LLQvtC10L3QuNGPINC60LvQsNGB0YHQsFxuLy8gLy8g0JXRgdC70Lgg0Y3Qu9C10LzQtdC90YLQvtCyINCx0YPQtNC10YIg0LzQvdC+0LPQvlxuLy8gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI2Zvcm1cIiksIGZ1bmN0aW9uKGUpe1xuLy8gICBlLmNsYXNzTGlzdC5hZGQoJ2xhc3QnKTtcbi8vIH0pO1xuIl19
