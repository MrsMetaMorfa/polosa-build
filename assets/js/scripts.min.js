/*!
 * gulp-nunjucks-sass-template
 * A Gulp 4 template including SCSS, Nunjucks, JS and more
 *
 * Url: https://github.com/DefaultSimon
 * Author: Simon GoriÄar
 * Copyright 2019-2020. MIT licensed.
 */
document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".header_tags .tag");let t,o,r=[];function n(){if(console.log(window.innerWidth>=1024,window.innerWidth>window.innerHeight),document.querySelector(".compilation")){let e,t,o,r=document.querySelectorAll(".compilation .item");window.innerWidth<1024&&window.innerWidth<window.innerHeight?(e=r[0].querySelector(".item_image").offsetWidth,t=e/2*3,Array.prototype.forEach.call(r,function(e){e.querySelector(".item_image").style.height=t+"px"})):(e=r[0].offsetWidth,t=r[0].classList.contains("wide")?(e-40)/151*106:(e-40)/53*76,Array.prototype.forEach.call(r,function(e){let r=e.querySelector(".item_image");o=e.querySelector(".item_tags"),r.style.height=t+"px",o.style.top=t+"px"}))}function n(e,t){t&&(t.onclick=(()=>new function(){e.classList.toggle("open")}))}if(document.querySelector("#copyLink")&&document.querySelector("#copyLink").addEventListener("click",()=>{let e=document.createElement("input"),t=window.location.href;document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}),document.querySelector(".header_tags")){let n=document.querySelector(".header_tags"),c=document.querySelector(".header_tags .tag_list"),i=document.querySelector(".header_tags .tag-wrapper"),a=0,s=n.offsetWidth,u=i.offsetWidth,d=0,y=Array.prototype.slice.call(e),f=r.slice();function l(e){if(d=u-24,document.querySelector(".header_tags .tag.current"))do{d+=f[e],e++}while(d<=s-u-24-26&&e<y.length);else do{d+=f[e],e++}while(d<=s-u-24&&e<y.length);return e}a=l(a);let h=document.querySelectorAll(".header_tags .tag");if(t){if(o()>a){let e=f[o()];y.splice(o(),1),f.splice(o(),1);let r=a-1;y.splice(r,0,t),f.splice(r,0,e)}a=l(a=0)}Array.prototype.forEach.call(h,function(e){e.remove()});for(let e=0;e<a;e++)i.before(y[e]);for(let e=a;e<y.length;e++)c.append(y[e]);n.style.flexWrap="nowrap"}if(document.querySelector(".header_tags")||document.querySelector(".header_menu")||document.querySelector(".header_notification")||document.querySelector(".header_language")||document.querySelector(".article .share")){let e,t,o,r,l,c,i,a,s,u,d,y,f,h,g;document.querySelector(".header_menu")&&(e=document.querySelector(".header_menu"),t=e.querySelector(".menu"),o=e.querySelector(".btn-icon")),new n(t,o),document.querySelector(".header_language")&&(r=document.querySelector(".header_language"),l=r.querySelector(".language"),c=r.querySelector(".btn-icon")),new n(l,c),document.querySelector(".header_notification")&&(i=document.querySelector(".header_notification"),a=i.querySelector(".notification"),s=i.querySelector(".btn-icon")),new n(a,s),document.querySelector(".header_tags")&&(u=document.querySelector(".header_tags .tag-wrapper"),d=u.querySelector(".tag_list"),y=u.querySelector(".tag-button")),new n(d,y),document.querySelector(".article .share")&&(f=document.querySelector(".article .share"),h=f.querySelector(".share_list"),g=f.querySelector(".share_button")),new n(h,g),document.onclick=(e=>{let r,n,i,u,f,p,m,q,S,w,_,x,H,L,W,b=e.target;document.querySelector(".header_menu")&&(r=b===t||t.contains(b),n=b===o,i=t.classList.contains("open")),document.querySelector(".header_language")&&(u=b===l||l.contains(b),f=b===c,p=l.classList.contains("open")),document.querySelector(".header_notification")&&(m=b===a||a.contains(b),q=b===s,S=a.classList.contains("open")),document.querySelector(".header_tags")&&(w=b===d||d.contains(b),_=b===y,x=d.classList.contains("open")),document.querySelector(".article .share")&&(H=b===h||h.contains(b),L=b===g,W=h.classList.contains("open")),document.querySelector(".header_menu")&&!r&&!n&&i&&t.classList.toggle("open"),document.querySelector(".header_language")&&!u&&!f&&p&&l.classList.toggle("open"),document.querySelector(".header_notification")&&!m&&!q&&S&&a.classList.toggle("open"),document.querySelector(".header_tags")&&!w&&!_&&x&&d.classList.toggle("open"),document.querySelector(".article .share")&&!H&&!L&&W&&h.classList.toggle("open")})}let c=document.querySelector(".article"),i=document.querySelector(".article_image");if(c)if(document.querySelector(".article_image-picture").style.height="auto",i.style.width="auto",window.innerWidth>window.innerHeight&&window.innerWidth>1024){let e,t,o=document.querySelector(".article_image-picture"),r=document.querySelector(".article_image-caption");o.style.height="auto",c.offsetWidth/2<c.querySelector(".wrapper").offsetWidth&&c.offsetWidth<1100?(o.offsetHeight+r.offsetHeight+80>window.innerHeight?(o.querySelector(".vertical").style.display="none",o.querySelector(".horizontal").style.display="block",e=(t=o.offsetWidth)/125*88):(o.querySelector(".vertical").style.display="block",o.querySelector(".horizontal").style.display="none",i.offsetHeight-r.offsetHeight!=0&&(o.style.height=i.offsetHeight-r.offsetHeight+"px"),t=(e=o.offsetHeight)/153*102),i.style.width=t+"px",document.querySelector(".article").style.paddingLeft=t>256?t+40+"px":"296px"):(o.offsetHeight+r.offsetHeight+80+40>=window.innerHeight?(o.querySelector(".vertical").style.display="none",o.querySelector(".horizontal").style.display="block",e=(t=o.offsetWidth)/125*88):(o.querySelector(".vertical").style.display="block",o.querySelector(".horizontal").style.display="none",t=(e=o.offsetHeight)/153*102),i.style.width=t+"px",document.querySelector(".article").style.paddingLeft=t>256?t+40+"px":"296px");let n=0,l=0;document.onscroll=function(){if(document.querySelector(".article")){let e,t=document.querySelector("section.article").offsetHeight,o=document.querySelector(".header").offsetHeight,r=document.querySelector(".banners_container"),c=r.offsetHeight,a=document.querySelector(".banners_wrapper").offsetHeight,s=document.querySelector(".content").offsetHeight,u=pageYOffset-n;c-a>0&&(c-a>(l+=e=u/(s/(c-a+140)))?r.style.transform="translateY("+-1*l+"px)":c-a<=l?r.style.transform="translateY("+-1*(c-a)+"px)":l<0&&(r.style.transform="translateY(0px)")),pageYOffset>73&&pageYOffset<o+t-80-(i.offsetHeight+40)?(i.style.position="fixed",i.style.top="40px",i.style.bottom="auto",i.style.width=i.offsetWidth+"px"):pageYOffset>73&&pageYOffset>=o+t-80-(i.offsetHeight+40)?(i.style.position="absolute",i.style.top="auto",i.style.bottom="80px",i.style.width=i.offsetWidth+"px"):(i.style.position="absolute",i.style.top="40px",i.style.bottom="auto",i.style.width=i.offsetWidth+"px"),n=pageYOffset}}}else document.querySelector(".article").style.paddingLeft="16px"}document.querySelector(".header_tags")&&(Array.prototype.forEach.call(e,function(e){r.push(e.offsetWidth+12)}),t=document.querySelector(".header_tags .tag.current"),o=function(){if(null!==t)return Array.prototype.slice.call(e).indexOf(t)}),new n,window.onresize=n});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidGFnc0xpc3REZWZhdWx0IiwicXVlcnlTZWxlY3RvckFsbCIsImN1cnJlbnRUYWciLCJjdXJyZW50VGFnSW5kZXgiLCJ0YWdzV2lkdGhMaXN0RGVmYXVsdCIsIlN0YXJ0U2NyaXB0cyIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJxdWVyeVNlbGVjdG9yIiwiaXRlbVdpZHRoIiwiaW1hZ2VIZWlnaHQiLCJpdGVtVGFncyIsIml0ZW1zT25QYWdlIiwib2Zmc2V0V2lkdGgiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsIiwiZWxlbSIsInN0eWxlIiwiaGVpZ2h0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbWFnZSIsInRvcCIsIlRvZ2dsZUJsb2NrIiwiYmxvY2siLCJidXR0b24iLCJvbmNsaWNrIiwidG9nZ2xlIiwiZHVtbXkiLCJjcmVhdGVFbGVtZW50IiwidGV4dCIsImxvY2F0aW9uIiwiaHJlZiIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInZhbHVlIiwic2VsZWN0IiwiZXhlY0NvbW1hbmQiLCJyZW1vdmVDaGlsZCIsInRhZ05hdiIsInRhZ01vcmVMaXN0IiwidGFnTW9yZUJ1dHRvbiIsImkiLCJ0YWdOYXZXaWR0aCIsInRhZ01vcmVCdXR0b25XaWR0aCIsInRhZ3NWaXNpYmxlV2lkdGgiLCJ0YWdzTGlzdCIsInNsaWNlIiwidGFnc1dpZHRoTGlzdCIsIkZpbmRUYWdzVmlzaWJsZVdpZHRoIiwiaW5kZXgiLCJsZW5ndGgiLCJhbGxOYXZUYWdzIiwiY3VycmVudFRhZ1dpZHRoIiwic3BsaWNlIiwiayIsInJlbW92ZSIsImIiLCJiZWZvcmUiLCJsIiwiYXBwZW5kIiwiZmxleFdyYXAiLCJtZW51V3JhcHBlciIsIm1lbnUiLCJtZW51QnV0dG9uIiwibGFuZ3VhZ2VXcmFwcGVyIiwibGFuZ3VhZ2UiLCJsYW5ndWFnZUJ1dHRvbiIsIm5vdGlmaWNhdGlvbldyYXBwZXIiLCJub3RpZmljYXRpb24iLCJub3RpZmljYXRpb25CdXR0b24iLCJuYXZXcmFwcGVyIiwibmF2TGlzdCIsIm5hdkJ1dHRvbiIsInNoYXJlV3JhcHBlciIsInNoYXJlTGlzdCIsInNoYXJlQnV0dG9uIiwiZSIsIml0c01lbnUiLCJpdHNNZW51QnV0dG9uIiwibWVudUlzQWN0aXZlIiwiaXRzTGFuZ3VhZ2UiLCJpdHNMYW5ndWFnZUJ1dHRvbiIsImxhbmd1YWdlSXNBY3RpdmUiLCJpdHNOb3RpZmljYXRpb24iLCJpdHNOb3RpZmljYXRpb25CdXR0b24iLCJub3RpZmljYXRpb25Jc0FjdGl2ZSIsIml0c0xpc3QiLCJpdHNMaXN0QnV0dG9uIiwibGlzdElzQWN0aXZlIiwiaXRzU2hhcmVMaXN0IiwiaXRzU2hhcmVMaXN0QnV0dG9uIiwic2hhcmVMaXN0SXNBY3RpdmUiLCJ0YXJnZXQiLCJhcnRpY2xlIiwiYXJ0aWNsZUltYWdlIiwid2lkdGgiLCJwaWN0dXJlSGVpZ2h0IiwicGljdHVyZVdpZHRoIiwicGljdHVyZSIsImNhcHRpb24iLCJvZmZzZXRIZWlnaHQiLCJkaXNwbGF5IiwicGFkZGluZ0xlZnQiLCJjdXJyZW50UGFnZVlQb3NpdGlvbiIsImJhbm5lcnNTY3JvbGwiLCJvbnNjcm9sbCIsImJhbm5lcnNTY3JvbGxOZXciLCJhcnRpY2xlSGVpZ2h0IiwiaGVhZGVySGVpZ2h0IiwiYmFubmVyc0NvbnRhaW5lciIsImJhbm5lcnNDb250YWluZXJIZWlnaHQiLCJiYW5uZXJzV3JhcHBlckhlaWdodCIsImNvbnRlbnRIZWlnaHQiLCJzY3JvbGxEaWZmZXJlbmNlIiwicGFnZVlPZmZzZXQiLCJ0cmFuc2Zvcm0iLCJwb3NpdGlvbiIsImJvdHRvbSIsInB1c2giLCJpbmRleE9mIiwib25yZXNpemUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ0FBLFNBQUFDLGlCQUFBLG1CQUFBLFdBQ0EsTUFBQUMsRUFBQUYsU0FBQUcsaUJBQUEscUJB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WUFBQSxNQUNBd0csWUFBQSxJQUFBQSxhQUFBTixFQUFBRCxFQUFBLElBQUFiLEVBQUFNLGFBQUEsS0FDQU4sRUFBQTlFLE1BQUFvRyxTQUFBLFdBQ0F0QixFQUFBOUUsTUFBQUssSUFBQSxPQUNBeUUsRUFBQTlFLE1BQUFxRyxPQUFBLE9BQ0F2QixFQUFBOUUsTUFBQStFLE1BQUFELEVBQUFwRixZQUFBLE9BRUFvRixFQUFBOUUsTUFBQW9HLFNBQUEsV0FDQXRCLEVBQUE5RSxNQUFBSyxJQUFBLE9BQ0F5RSxFQUFBOUUsTUFBQXFHLE9BQUEsT0FDQXZCLEVBQUE5RSxNQUFBK0UsTUFBQUQsRUFBQXBGLFlBQUEsTUFHQTZGLEVBQUFXLG1CQUlBMUgsU0FBQWEsY0FBQSxZQUFBVyxNQUFBc0YsWUFBQSxPQTVTQTlHLFNBQUFhLGNBQUEsa0JBQ0FNLE1BQUFDLFVBQUFDLFFBQUFDLEtBQUFwQixFQUFBLFNBQUFxQixHQUNBakIsRUFBQXdILEtBQUF2RyxFQUFBTCxZQUFBLE1BTkFkLEVBQUFKLFNBQUFhLGNBQUEsNkJBQ0FSLEVBQUEsV0FDQSxHQUFBLE9BQUFELEVBQ0EsT0FBQWUsTUFBQUMsVUFBQWtDLE1BQUFoQyxLQUFBcEIsR0FBQTZILFFBQUEzSCxLQWtUQSxJQUFBRyxFQUVBRyxPQUFBc0gsU0FBQXpIIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g0JDQvdCw0LvQvtCzICQoZG9jdW1lbnQpLnJlYWR5KClcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgY29uc3QgdGFnc0xpc3REZWZhdWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl90YWdzIC50YWcnKTtcbiAgbGV0IHRhZ3NXaWR0aExpc3REZWZhdWx0ID0gW10sIGN1cnJlbnRUYWcsIGN1cnJlbnRUYWdJbmRleDtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncycpKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0YWdzTGlzdERlZmF1bHQsIGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgIHRhZ3NXaWR0aExpc3REZWZhdWx0LnB1c2goIGVsZW0ub2Zmc2V0V2lkdGggKyAxMiApO1xuICAgIH0pO1xuICAgIGN1cnJlbnRUYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MgLnRhZy5jdXJyZW50Jyk7XG4gICAgY3VycmVudFRhZ0luZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoY3VycmVudFRhZyAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGFnc0xpc3REZWZhdWx0KS5pbmRleE9mKGN1cnJlbnRUYWcpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBTdGFydFNjcmlwdHMoKSB7XG4gICAgY29uc29sZS5sb2coKHdpbmRvdy5pbm5lcldpZHRoID49IDEwMjQpLCAod2luZG93LmlubmVyV2lkdGggPiB3aW5kb3cuaW5uZXJIZWlnaHQpKTtcblxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcGlsYXRpb24nKSkge1xuICAgICAgbGV0IGl0ZW1zT25QYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbXBpbGF0aW9uIC5pdGVtJyksIGl0ZW1XaWR0aCwgaW1hZ2VIZWlnaHQsIGl0ZW1UYWdzO1xuICAgICAgaWYgKCh3aW5kb3cuaW5uZXJXaWR0aCA8IDEwMjQpICYmICh3aW5kb3cuaW5uZXJXaWR0aCA8IHdpbmRvdy5pbm5lckhlaWdodCkpIHsgLy9wb3J0cmFpdFxuICAgICAgICBpdGVtV2lkdGggPSBpdGVtc09uUGFnZVswXS5xdWVyeVNlbGVjdG9yKCcuaXRlbV9pbWFnZScpLm9mZnNldFdpZHRoO1xuICAgICAgICBpbWFnZUhlaWdodCA9IGl0ZW1XaWR0aCAvIDIgKiAzO1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGl0ZW1zT25QYWdlLCBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICBsZXQgaW1hZ2UgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5pdGVtX2ltYWdlJyk7XG4gICAgICAgICAgaW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gaW1hZ2VIZWlnaHQgKyAncHgnO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1XaWR0aCA9IGl0ZW1zT25QYWdlWzBdLm9mZnNldFdpZHRoO1xuICAgICAgICBpZiAoaXRlbXNPblBhZ2VbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCd3aWRlJykpIHtcbiAgICAgICAgICBpbWFnZUhlaWdodCA9IChpdGVtV2lkdGggLSA0MCkgLyAxNTEgKiAxMDY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW1hZ2VIZWlnaHQgPSAoaXRlbVdpZHRoIC0gNDApIC8gNTMgKiA3NjtcbiAgICAgICAgfVxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGl0ZW1zT25QYWdlLCBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICBsZXQgaW1hZ2UgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5pdGVtX2ltYWdlJyk7XG4gICAgICAgICAgaXRlbVRhZ3MgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5pdGVtX3RhZ3MnKTtcbiAgICAgICAgICBpbWFnZS5zdHlsZS5oZWlnaHQgPSBpbWFnZUhlaWdodCArICdweCc7XG4gICAgICAgICAgaXRlbVRhZ3Muc3R5bGUudG9wID0gaW1hZ2VIZWlnaHQgKyAncHgnO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvcHlMaW5rJykpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3B5TGluaycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsZXQgZHVtbXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpLFxuICAgICAgICAgICAgdGV4dCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZHVtbXkpO1xuICAgICAgICBkdW1teS52YWx1ZSA9IHRleHQ7XG4gICAgICAgIGR1bW15LnNlbGVjdCgpO1xuICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGR1bW15KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFRvZ2dsZUJsb2NrKGJsb2NrLCBidXR0b24pIHtcbiAgICAgIGxldCBUb2dnbGVNZW51ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGJsb2NrLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgIH07XG4gICAgICBpZiAoYnV0dG9uKSB7XG4gICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gKG5ldyBUb2dnbGVNZW51KCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MnKSkge1xuICAgICAgbGV0IHRhZ05hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncycpLFxuICAgICAgICAgIHRhZ01vcmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzIC50YWdfbGlzdCcpLFxuICAgICAgICAgIHRhZ01vcmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MgLnRhZy13cmFwcGVyJyksXG4gICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgdGFnTmF2V2lkdGggPSB0YWdOYXYub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgdGFnTW9yZUJ1dHRvbldpZHRoID0gdGFnTW9yZUJ1dHRvbi5vZmZzZXRXaWR0aCxcbiAgICAgICAgICB0YWdzVmlzaWJsZVdpZHRoID0gMCxcbiAgICAgICAgICB0YWdzTGlzdCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRhZ3NMaXN0RGVmYXVsdCksXG4gICAgICAgICAgdGFnc1dpZHRoTGlzdCA9IHRhZ3NXaWR0aExpc3REZWZhdWx0LnNsaWNlKCk7XG4gICAgICBmdW5jdGlvbiBGaW5kVGFnc1Zpc2libGVXaWR0aChpbmRleCkge1xuICAgICAgICB0YWdzVmlzaWJsZVdpZHRoID0gdGFnTW9yZUJ1dHRvbldpZHRoIC0gMjQ7XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MgLnRhZy5jdXJyZW50JykpIHtcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICB0YWdzVmlzaWJsZVdpZHRoID0gdGFnc1Zpc2libGVXaWR0aCArIHRhZ3NXaWR0aExpc3RbaW5kZXhdO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICB9IHdoaWxlICgodGFnc1Zpc2libGVXaWR0aCA8PSAodGFnTmF2V2lkdGggLSB0YWdNb3JlQnV0dG9uV2lkdGggLSAyNCAtIDI2KSkgJiYgKGluZGV4IDwgdGFnc0xpc3QubGVuZ3RoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgdGFnc1Zpc2libGVXaWR0aCA9IHRhZ3NWaXNpYmxlV2lkdGggKyB0YWdzV2lkdGhMaXN0W2luZGV4XTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgfSB3aGlsZSAoKHRhZ3NWaXNpYmxlV2lkdGggPD0gKHRhZ05hdldpZHRoIC0gdGFnTW9yZUJ1dHRvbldpZHRoIC0gMjQpKSAmJiAoaW5kZXggPCB0YWdzTGlzdC5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgICBpID0gRmluZFRhZ3NWaXNpYmxlV2lkdGgoaSk7XG4gICAgICBsZXQgYWxsTmF2VGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfdGFncyAudGFnJyk7XG4gICAgICBpZiAoY3VycmVudFRhZykge1xuICAgICAgICBpZiAoY3VycmVudFRhZ0luZGV4KCkgPiBpKSB7XG4gICAgICAgICAgbGV0IGN1cnJlbnRUYWdXaWR0aCA9IHRhZ3NXaWR0aExpc3RbY3VycmVudFRhZ0luZGV4KCldO1xuICAgICAgICAgIHRhZ3NMaXN0LnNwbGljZShjdXJyZW50VGFnSW5kZXgoKSwgMSk7XG4gICAgICAgICAgdGFnc1dpZHRoTGlzdC5zcGxpY2UoY3VycmVudFRhZ0luZGV4KCksIDEpO1xuICAgICAgICAgIGxldCBrID0gaSAtIDE7XG4gICAgICAgICAgdGFnc0xpc3Quc3BsaWNlKGssIDAsIGN1cnJlbnRUYWcpO1xuICAgICAgICAgIHRhZ3NXaWR0aExpc3Quc3BsaWNlKGssIDAsIGN1cnJlbnRUYWdXaWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaSA9IDA7XG4gICAgICAgIGkgPSBGaW5kVGFnc1Zpc2libGVXaWR0aChpKTtcbiAgICAgIH1cbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYWxsTmF2VGFncywgZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBpOyBiKyspIHtcbiAgICAgICAgdGFnTW9yZUJ1dHRvbi5iZWZvcmUodGFnc0xpc3RbYl0pO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgbCA9IGk7IGwgPCB0YWdzTGlzdC5sZW5ndGg7IGwrKykge1xuICAgICAgICB0YWdNb3JlTGlzdC5hcHBlbmQodGFnc0xpc3RbbF0pO1xuICAgICAgfVxuICAgICAgdGFnTmF2LnN0eWxlLmZsZXhXcmFwID0gJ25vd3JhcCc7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzJykgfHxcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbWVudScpIHx8XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX25vdGlmaWNhdGlvbicpIHx8XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX2xhbmd1YWdlJykgfHxcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlIC5zaGFyZScpXG4gICAgKSB7XG4gICAgICBsZXQgbWVudVdyYXBwZXIsIG1lbnUsIG1lbnVCdXR0b247XG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9tZW51JykpIHtcbiAgICAgICAgbWVudVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX21lbnUnKTtcbiAgICAgICAgbWVudSA9IG1lbnVXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5tZW51Jyk7XG4gICAgICAgIG1lbnVCdXR0b24gPSBtZW51V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuYnRuLWljb24nKTtcbiAgICAgIH1cbiAgICAgIG5ldyBUb2dnbGVCbG9jayhtZW51LCBtZW51QnV0dG9uKTtcblxuICAgICAgbGV0IGxhbmd1YWdlV3JhcHBlciwgbGFuZ3VhZ2UsIGxhbmd1YWdlQnV0dG9uO1xuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbGFuZ3VhZ2UnKSkge1xuICAgICAgICBsYW5ndWFnZVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX2xhbmd1YWdlJyk7XG4gICAgICAgIGxhbmd1YWdlID0gbGFuZ3VhZ2VXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5sYW5ndWFnZScpO1xuICAgICAgICBsYW5ndWFnZUJ1dHRvbiA9IGxhbmd1YWdlV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuYnRuLWljb24nKTtcbiAgICAgIH1cbiAgICAgIG5ldyBUb2dnbGVCbG9jayhsYW5ndWFnZSwgbGFuZ3VhZ2VCdXR0b24pO1xuXG4gICAgICBsZXQgbm90aWZpY2F0aW9uV3JhcHBlciwgbm90aWZpY2F0aW9uLCBub3RpZmljYXRpb25CdXR0b247XG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9ub3RpZmljYXRpb24nKSkge1xuICAgICAgICBub3RpZmljYXRpb25XcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9ub3RpZmljYXRpb24nKTtcbiAgICAgICAgbm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcubm90aWZpY2F0aW9uJyk7XG4gICAgICAgIG5vdGlmaWNhdGlvbkJ1dHRvbiA9IG5vdGlmaWNhdGlvbldyYXBwZXIucXVlcnlTZWxlY3RvcignLmJ0bi1pY29uJyk7XG4gICAgICB9XG4gICAgICBuZXcgVG9nZ2xlQmxvY2sobm90aWZpY2F0aW9uLCBub3RpZmljYXRpb25CdXR0b24pO1xuXG4gICAgICBsZXQgbmF2V3JhcHBlciwgbmF2TGlzdCwgbmF2QnV0dG9uO1xuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncycpKSB7XG4gICAgICAgIG5hdldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MgLnRhZy13cmFwcGVyJyk7XG4gICAgICAgIG5hdkxpc3QgPSBuYXZXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy50YWdfbGlzdCcpO1xuICAgICAgICBuYXZCdXR0b24gPSBuYXZXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy50YWctYnV0dG9uJyk7XG4gICAgICB9XG4gICAgICBuZXcgVG9nZ2xlQmxvY2sobmF2TGlzdCwgbmF2QnV0dG9uKTtcblxuICAgICAgbGV0IHNoYXJlV3JhcHBlciwgc2hhcmVMaXN0LCBzaGFyZUJ1dHRvbjtcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZSAuc2hhcmUnKSkge1xuICAgICAgICBzaGFyZVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZSAuc2hhcmUnKTtcbiAgICAgICAgc2hhcmVMaXN0ID0gc2hhcmVXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZV9saXN0Jyk7XG4gICAgICAgIHNoYXJlQnV0dG9uID0gc2hhcmVXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZV9idXR0b24nKTtcbiAgICAgIH1cbiAgICAgIG5ldyBUb2dnbGVCbG9jayhzaGFyZUxpc3QsIHNoYXJlQnV0dG9uKTtcblxuICAgICAgZG9jdW1lbnQub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgbGV0IGl0c01lbnUsIGl0c01lbnVCdXR0b24sIG1lbnVJc0FjdGl2ZTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbWVudScpKSB7XG4gICAgICAgICAgICBpdHNNZW51ID0gdGFyZ2V0ID09PSBtZW51IHx8IG1lbnUuY29udGFpbnModGFyZ2V0KTtcbiAgICAgICAgICAgIGl0c01lbnVCdXR0b24gPSB0YXJnZXQgPT09IG1lbnVCdXR0b247XG4gICAgICAgICAgICBtZW51SXNBY3RpdmUgPSBtZW51LmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGl0c0xhbmd1YWdlLCBpdHNMYW5ndWFnZUJ1dHRvbiwgbGFuZ3VhZ2VJc0FjdGl2ZTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbGFuZ3VhZ2UnKSkge1xuICAgICAgICAgIGl0c0xhbmd1YWdlID0gdGFyZ2V0ID09PSBsYW5ndWFnZSB8fCBsYW5ndWFnZS5jb250YWlucyh0YXJnZXQpO1xuICAgICAgICAgIGl0c0xhbmd1YWdlQnV0dG9uID0gdGFyZ2V0ID09PSBsYW5ndWFnZUJ1dHRvbjtcbiAgICAgICAgICBsYW5ndWFnZUlzQWN0aXZlID0gbGFuZ3VhZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaXRzTm90aWZpY2F0aW9uLCBpdHNOb3RpZmljYXRpb25CdXR0b24sIG5vdGlmaWNhdGlvbklzQWN0aXZlO1xuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9ub3RpZmljYXRpb24nKSkge1xuICAgICAgICAgIGl0c05vdGlmaWNhdGlvbiA9IHRhcmdldCA9PT0gbm90aWZpY2F0aW9uIHx8IG5vdGlmaWNhdGlvbi5jb250YWlucyh0YXJnZXQpO1xuICAgICAgICAgIGl0c05vdGlmaWNhdGlvbkJ1dHRvbiA9IHRhcmdldCA9PT0gbm90aWZpY2F0aW9uQnV0dG9uO1xuICAgICAgICAgIG5vdGlmaWNhdGlvbklzQWN0aXZlID0gbm90aWZpY2F0aW9uLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGl0c0xpc3QsIGl0c0xpc3RCdXR0b24sIGxpc3RJc0FjdGl2ZTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncycpKSB7XG4gICAgICAgICAgaXRzTGlzdCA9IHRhcmdldCA9PT0gbmF2TGlzdCB8fCBuYXZMaXN0LmNvbnRhaW5zKHRhcmdldCk7XG4gICAgICAgICAgaXRzTGlzdEJ1dHRvbiA9IHRhcmdldCA9PT0gbmF2QnV0dG9uO1xuICAgICAgICAgIGxpc3RJc0FjdGl2ZSA9IG5hdkxpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaXRzU2hhcmVMaXN0LCBpdHNTaGFyZUxpc3RCdXR0b24sIHNoYXJlTGlzdElzQWN0aXZlO1xuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUgLnNoYXJlJykpIHtcbiAgICAgICAgICBpdHNTaGFyZUxpc3QgPSB0YXJnZXQgPT09IHNoYXJlTGlzdCB8fCBzaGFyZUxpc3QuY29udGFpbnModGFyZ2V0KTtcbiAgICAgICAgICBpdHNTaGFyZUxpc3RCdXR0b24gPSB0YXJnZXQgPT09IHNoYXJlQnV0dG9uO1xuICAgICAgICAgIHNoYXJlTGlzdElzQWN0aXZlID0gc2hhcmVMaXN0LmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbWVudScpICYmICFpdHNNZW51ICYmICFpdHNNZW51QnV0dG9uICYmIG1lbnVJc0FjdGl2ZSkge1xuICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX2xhbmd1YWdlJykgJiYgIWl0c0xhbmd1YWdlICYmICFpdHNMYW5ndWFnZUJ1dHRvbiAmJiBsYW5ndWFnZUlzQWN0aXZlKSB7XG4gICAgICAgICAgbGFuZ3VhZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX25vdGlmaWNhdGlvbicpICYmICFpdHNOb3RpZmljYXRpb24gJiYgIWl0c05vdGlmaWNhdGlvbkJ1dHRvbiAmJiBub3RpZmljYXRpb25Jc0FjdGl2ZSkge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncycpICYmICFpdHNMaXN0ICYmICFpdHNMaXN0QnV0dG9uICYmIGxpc3RJc0FjdGl2ZSkge1xuICAgICAgICAgIG5hdkxpc3QuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZSAuc2hhcmUnKSAmJiAhaXRzU2hhcmVMaXN0ICYmICFpdHNTaGFyZUxpc3RCdXR0b24gJiYgc2hhcmVMaXN0SXNBY3RpdmUpIHtcbiAgICAgICAgICBzaGFyZUxpc3QuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGxldCBhcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKSxcbiAgICAgICAgYXJ0aWNsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGVfaW1hZ2UnKTtcbiAgICBpZiAoYXJ0aWNsZSkge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGVfaW1hZ2UtcGljdHVyZScpLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9ICdhdXRvJztcbiAgICAgIGlmICgod2luZG93LmlubmVyV2lkdGggPiB3aW5kb3cuaW5uZXJIZWlnaHQpICYmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDEwMjQpKSB7XG4gICAgICAgIGxldCBwaWN0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGVfaW1hZ2UtcGljdHVyZScpLFxuICAgICAgICAgIGNhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZV9pbWFnZS1jYXB0aW9uJyksXG4gICAgICAgICAgcGljdHVyZUhlaWdodCwgcGljdHVyZVdpZHRoO1xuICAgICAgICBwaWN0dXJlLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgaWYgKCgoYXJ0aWNsZS5vZmZzZXRXaWR0aCAvIDIpIDwgKGFydGljbGUucXVlcnlTZWxlY3RvcignLndyYXBwZXInKS5vZmZzZXRXaWR0aCkpICYmIChhcnRpY2xlLm9mZnNldFdpZHRoIDwgMTEwMCkpIHtcbiAgICAgICAgICBpZiAoKHBpY3R1cmUub2Zmc2V0SGVpZ2h0ICsgY2FwdGlvbi5vZmZzZXRIZWlnaHQgKyA4MCkgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgICAgICAgIHBpY3R1cmUucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBpY3R1cmUucXVlcnlTZWxlY3RvcignLmhvcml6b250YWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBpY3R1cmVXaWR0aCA9IHBpY3R1cmUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICBwaWN0dXJlSGVpZ2h0ID0gcGljdHVyZVdpZHRoIC8gMTI1ICogODg7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBpY3R1cmUucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBwaWN0dXJlLnF1ZXJ5U2VsZWN0b3IoJy5ob3Jpem9udGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGlmICgoYXJ0aWNsZUltYWdlLm9mZnNldEhlaWdodCAtIGNhcHRpb24ub2Zmc2V0SGVpZ2h0KSAhPT0gMCkge1xuICAgICAgICAgICAgICBwaWN0dXJlLnN0eWxlLmhlaWdodCA9IChhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0IC0gY2FwdGlvbi5vZmZzZXRIZWlnaHQpICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBpY3R1cmVIZWlnaHQgPSBwaWN0dXJlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIHBpY3R1cmVXaWR0aCA9IHBpY3R1cmVIZWlnaHQgLyAxNTMgKiAxMDI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9IHBpY3R1cmVXaWR0aCArICdweCc7XG4gICAgICAgICAgaWYgKHBpY3R1cmVXaWR0aCA+IDI1Nikge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKS5zdHlsZS5wYWRkaW5nTGVmdCA9IHBpY3R1cmVXaWR0aCArIDQwICsgJ3B4JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKS5zdHlsZS5wYWRkaW5nTGVmdCA9IDI1NiArIDQwICsgJ3B4JztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKChwaWN0dXJlLm9mZnNldEhlaWdodCArIGNhcHRpb24ub2Zmc2V0SGVpZ2h0ICsgODAgKyA0MCkgPj0gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgICAgICBwaWN0dXJlLnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBwaWN0dXJlLnF1ZXJ5U2VsZWN0b3IoJy5ob3Jpem9udGFsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBwaWN0dXJlV2lkdGggPSBwaWN0dXJlLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgcGljdHVyZUhlaWdodCA9IHBpY3R1cmVXaWR0aCAvIDEyNSAqIDg4O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwaWN0dXJlLnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgcGljdHVyZS5xdWVyeVNlbGVjdG9yKCcuaG9yaXpvbnRhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBwaWN0dXJlSGVpZ2h0ID0gcGljdHVyZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICBwaWN0dXJlV2lkdGggPSBwaWN0dXJlSGVpZ2h0IC8gMTUzICogMTAyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUud2lkdGggPSBwaWN0dXJlV2lkdGggKyAncHgnO1xuICAgICAgICAgIGlmIChwaWN0dXJlV2lkdGggPiAyNTYpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlJykuc3R5bGUucGFkZGluZ0xlZnQgPSBwaWN0dXJlV2lkdGggKyA0MCArICdweCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlJykuc3R5bGUucGFkZGluZ0xlZnQgPSAyNTYgKyA0MCArICdweCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJyZW50UGFnZVlQb3NpdGlvbiA9IDAsIGJhbm5lcnNTY3JvbGwgPSAwO1xuICAgICAgICBkb2N1bWVudC5vbnNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKSkge1xuICAgICAgICAgICAgbGV0IGFydGljbGVIZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uLmFydGljbGUnKS5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgIGhlYWRlckhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICBsZXQgYmFubmVyc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW5uZXJzX2NvbnRhaW5lcicpLFxuICAgICAgICAgICAgICBiYW5uZXJzQ29udGFpbmVySGVpZ2h0ID0gYmFubmVyc0NvbnRhaW5lci5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgIGJhbm5lcnNXcmFwcGVySGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhbm5lcnNfd3JhcHBlcicpLm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgICAgY29udGVudEhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jykub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICBibG9ja3NEaWZmZXJlbmNlID0gKGNvbnRlbnRIZWlnaHQpIC8gKGJhbm5lcnNDb250YWluZXJIZWlnaHQgLSBiYW5uZXJzV3JhcHBlckhlaWdodCArIDE0MCksXG4gICAgICAgICAgICAgIHNjcm9sbERpZmZlcmVuY2UgPSBwYWdlWU9mZnNldCAtIGN1cnJlbnRQYWdlWVBvc2l0aW9uLCBiYW5uZXJzU2Nyb2xsTmV3O1xuICAgICAgICAgICAgaWYgKChiYW5uZXJzQ29udGFpbmVySGVpZ2h0IC0gYmFubmVyc1dyYXBwZXJIZWlnaHQpID4gMCkge1xuICAgICAgICAgICAgICBiYW5uZXJzU2Nyb2xsTmV3ID0gc2Nyb2xsRGlmZmVyZW5jZSAvIGJsb2Nrc0RpZmZlcmVuY2U7XG4gICAgICAgICAgICAgIGJhbm5lcnNTY3JvbGwgPSBiYW5uZXJzU2Nyb2xsICsgYmFubmVyc1Njcm9sbE5ldztcbiAgICAgICAgICAgICAgaWYgKChiYW5uZXJzQ29udGFpbmVySGVpZ2h0IC0gYmFubmVyc1dyYXBwZXJIZWlnaHQpID4gYmFubmVyc1Njcm9sbCkge1xuICAgICAgICAgICAgICAgIGJhbm5lcnNDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoJyArIChiYW5uZXJzU2Nyb2xsICAqIC0xKSArICdweCknO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKChiYW5uZXJzQ29udGFpbmVySGVpZ2h0IC0gYmFubmVyc1dyYXBwZXJIZWlnaHQpIDw9IGJhbm5lcnNTY3JvbGwpIHtcbiAgICAgICAgICAgICAgICBiYW5uZXJzQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKCcgKyAoKGJhbm5lcnNDb250YWluZXJIZWlnaHQgLSBiYW5uZXJzV3JhcHBlckhlaWdodCkgICogLTEpICsgJ3B4KSc7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmFubmVyc1Njcm9sbCA8IDApIHtcbiAgICAgICAgICAgICAgICBiYW5uZXJzQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKCcgKyAwICsgJ3B4KSc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgocGFnZVlPZmZzZXQgPiA3MykgJiYgKHBhZ2VZT2Zmc2V0IDwgKGhlYWRlckhlaWdodCArIGFydGljbGVIZWlnaHQgLSA4MCAtIChhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0ICsgNDApKSkpIHtcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnRvcCA9ICc0MHB4JztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLmJvdHRvbSA9ICdhdXRvJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLndpZHRoID0gYXJ0aWNsZUltYWdlLm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHBhZ2VZT2Zmc2V0ID4gNzMpICYmIChwYWdlWU9mZnNldCA+PSAoaGVhZGVySGVpZ2h0ICsgYXJ0aWNsZUhlaWdodCAtIDgwIC0gKGFydGljbGVJbWFnZS5vZmZzZXRIZWlnaHQgKyA0MCkpKSkge1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUudG9wID0gJ2F1dG8nO1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUuYm90dG9tID0gJzgwcHgnO1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUud2lkdGggPSBhcnRpY2xlSW1hZ2Uub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnRvcCA9ICc0MHB4JztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLmJvdHRvbSA9ICdhdXRvJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLndpZHRoID0gYXJ0aWNsZUltYWdlLm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VycmVudFBhZ2VZUG9zaXRpb24gPSBwYWdlWU9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZScpLnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzE2cHgnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5ldyBTdGFydFNjcmlwdHMoKTtcblxuICB3aW5kb3cub25yZXNpemUgPSBTdGFydFNjcmlwdHM7XG59KTtcblxuXG4vLyAvLyDQldGB0LvQuCDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0L3QsNC50LTQtdC9INC+0LTQuNC9INGN0LvQtdC80LXQvdGCXG4vLyBpZigoZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVwiKSkgIT09IG51bGwpXG4vLyAgIGUuY2xhc3NMaXN0LmFkZCgnbGFzdCcpOyAvLyDQkNC90LDQu9C+0LMg0LLRi9Cx0L7RgNC60Lgg0Lgg0L/RgNC40YHQstC+0LXQvdC40Y8g0LrQu9Cw0YHRgdCwXG4vLyAvLyDQldGB0LvQuCDRjdC70LXQvNC10L3RgtC+0LIg0LHRg9C00LXRgiDQvNC90L7Qs9C+XG4vLyBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjZm9ybVwiKSwgZnVuY3Rpb24oZSl7XG4vLyAgIGUuY2xhc3NMaXN0LmFkZCgnbGFzdCcpO1xuLy8gfSk7XG4iXX0=
