/*!
 * gulp-nunjucks-sass-template
 * A Gulp 4 template including SCSS, Nunjucks, JS and more
 *
 * Url: https://github.com/DefaultSimon
 * Author: Simon Goriƒçar
 * Copyright 2019-2020. MIT licensed.
 */
document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".main .nav .tag");let t,n,o=[];function i(){if(document.querySelector(".compilation")){let e,t,n,o=document.querySelectorAll(".item");window.innerWidth<=1024&&window.innerWidth<window.innerHeight?(e=o[0].querySelector(".item_image").offsetWidth,t=e/141*212,Array.prototype.forEach.call(o,function(e){e.querySelector(".item_image").style.height=t+"px"})):(e=o[0].offsetWidth,t=e/141*212,o[0].classList.contains("wide")&&(t=e/151*106),Array.prototype.forEach.call(o,function(e){let o=e.querySelector(".item_image");n=e.querySelector(".item_tags"),o.style.height=t+"px",n.style.top=t+"px"}))}if(document.querySelector(".article")){let e,t,n=document.querySelector(".article_image");window.innerWidth<=1024&&window.innerWidth<window.innerHeight?(n.style.width="inherit",n.style.height="inherit",t=n.offsetWidth,e=n.offsetHeight,n.nextElementSibling.style.paddingLeft=0,n.style.height=e+"px",n.nextElementSibling.querySelector(".header").style.marginBottom=e+"px"):window.innerWidth>1024&&window.innerWidth>window.innerHeight?(n.style.width="inherit",n.style.height="inherit",t=(e=n.offsetHeight)/212*141,n.nextElementSibling.querySelector(".header").style.marginBottom="inherit",n.style.width=t+"px",n.nextElementSibling.style.paddingLeft=t+64+"px"):(n.style.width="inherit",n.style.height="inherit",e=n.offsetHeight,t=n.offsetWidth,n.nextElementSibling.querySelector(".header").style.marginBottom="inherit",n.style.width=t+"px",n.nextElementSibling.style.paddingLeft=t+48+"px")}function i(e,t){t.onclick=(()=>new function(){e.classList.toggle("open")})}if(document.querySelector("#copyLink")&&document.querySelector("#copyLink").addEventListener("click",()=>{let e=document.createElement("input"),t=window.location.href;document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}),document.querySelector(".main .nav")){console.log(n());let i=document.querySelector(".main .nav"),l=document.querySelector(".main .nav .tag_list"),c=document.querySelector(".main .nav .tag-wrapper"),a=0,s=i.offsetWidth,u=c.offsetWidth,d=0,y=Array.prototype.slice.call(e),m=o;function r(e){if(d=0,document.querySelector(".main .nav .tag.current"))for(;d<=s-u-6-26&&e<y.length;)d+=m[e],e++;else for(;d<=s-u-6&&e<y.length;)d+=m[e],e++;return e}a=r(a);let h=document.querySelectorAll(".main .nav .tag");if(t){if(a-=1,n()>a){let e=m[n()];y.splice(n(),1),m.splice(n(),1);let o=a-1;y.splice(o,0,t),m.splice(o,0,e)}a=r(a=0)}a-=1,Array.prototype.forEach.call(h,function(e){e.remove()});for(let e=0;e<a;e++)c.before(y[e]);for(let e=a;e<y.length;e++)l.append(y[e])}if(document.querySelector(".header_top")||document.querySelector(".main .nav")){const e=document.querySelector(".header_menu"),t=e.querySelector(".menu"),n=e.querySelector(".btn-icon");new i(t,n);const o=document.querySelector(".header_language"),r=o.querySelector(".language"),l=o.querySelector(".btn-icon");new i(r,l);const c=document.querySelector(".header_notification"),a=c.querySelector(".notification"),s=c.querySelector(".btn-icon");new i(a,s);const u=document.querySelector(".main .nav .tag-wrapper"),d=u.querySelector(".tag_list"),y=u.querySelector(".tag-button");new i(d,y),document.onclick=(e=>{let o=e.target,i=o==t||t.contains(o),c=o==n,u=t.classList.contains("open"),m=o==r||r.contains(o),h=o==l,g=r.classList.contains("open"),f=o==a||a.contains(o),p=o==s,S=a.classList.contains("open"),q=o==d||d.contains(o),w=o==y,L=d.classList.contains("open");i||c||!u||t.classList.toggle("open"),m||h||!g||r.classList.toggle("open"),f||p||!S||a.classList.toggle("open"),q||w||!L||d.classList.toggle("open")})}}document.querySelector(".main .nav")&&(Array.prototype.forEach.call(e,function(e){o.push(e.offsetWidth+12)}),t=document.querySelector(".main .nav .tag.current"),n=function(){if(null!==t)return Array.prototype.slice.call(e).indexOf(t)}),new i,window.onresize=i});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidGFnc0xpc3REZWZhdWx0IiwicXVlcnlTZWxlY3RvckFsbCIsImN1cnJlbnRUYWciLCJjdXJyZW50VGFnSW5kZXgiLCJ0YWdzV2lkdGhMaXN0RGVmYXVsdCIsIlN0YXJ0U2NyaXB0cyIsInF1ZXJ5U2VsZWN0b3IiLCJpdGVtV2lkdGgiLCJpbWFnZUhlaWdodCIsIml0ZW1UYWdzIiwiaXRlbXNPblBhZ2UiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJvZmZzZXRXaWR0aCIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJlbGVtIiwic3R5bGUiLCJoZWlnaHQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImltYWdlIiwidG9wIiwiaW1hZ2VXaWR0aCIsImFydGljbGVJbWFnZSIsIndpZHRoIiwib2Zmc2V0SGVpZ2h0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwicGFkZGluZ0xlZnQiLCJtYXJnaW5Cb3R0b20iLCJUb2dnbGVCbG9jayIsImJsb2NrIiwiYnV0dG9uIiwib25jbGljayIsInRvZ2dsZSIsImR1bW15IiwiY3JlYXRlRWxlbWVudCIsInRleHQiLCJsb2NhdGlvbiIsImhyZWYiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJ2YWx1ZSIsInNlbGVjdCIsImV4ZWNDb21tYW5kIiwicmVtb3ZlQ2hpbGQiLCJjb25zb2xlIiwibG9nIiwidGFnTmF2IiwidGFnTW9yZUxpc3QiLCJ0YWdNb3JlQnV0dG9uIiwiaSIsInRhZ05hdldpZHRoIiwidGFnTW9yZUJ1dHRvbldpZHRoIiwidGFnc1Zpc2libGVXaWR0aCIsInRhZ3NMaXN0Iiwic2xpY2UiLCJ0YWdzV2lkdGhMaXN0IiwiRmluZFRhZ3NWaXNpYmxlV2lkdGgiLCJpbmRleCIsImxlbmd0aCIsImFsbE5hdlRhZ3MiLCJjdXJyZW50VGFnV2lkdGgiLCJzcGxpY2UiLCJrIiwicmVtb3ZlIiwiYiIsImJlZm9yZSIsImwiLCJhcHBlbmQiLCJtZW51V3JhcHBlciIsIm1lbnUiLCJtZW51QnV0dG9uIiwibGFuZ3VhZ2VXcmFwcGVyIiwibGFuZ3VhZ2UiLCJsYW5ndWFnZUJ1dHRvbiIsIm5vdGlmaWNhdGlvbldyYXBwZXIiLCJub3RpZmljYXRpb24iLCJub3RpZmljYXRpb25CdXR0b24iLCJuYXZXcmFwcGVyIiwibmF2TGlzdCIsIm5hdkJ1dHRvbiIsImUiLCJ0YXJnZXQiLCJpdHNNZW51IiwiaXRzTWVudUJ1dHRvbiIsIm1lbnVJc0FjdGl2ZSIsIml0c0xhbmd1YWdlIiwiaXRzTGFuZ3VhZ2VCdXR0b24iLCJsYW5ndWFnZUlzQWN0aXZlIiwiaXRzTm90aWZpY2F0aW9uIiwiaXRzTm90aWZpY2F0aW9uQnV0dG9uIiwibm90aWZpY2F0aW9uSXNBY3RpdmUiLCJpdHNMaXN0IiwiaXRzTGlzdEJ1dHRvbiIsImxpc3RJc0FjdGl2ZSIsInB1c2giLCJpbmRleE9mIiwib25yZXNpemUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ0FBLFNBQUFDLGlCQUFBLG1CQUFBLFdBQ0EsTUFBQUMsRUFBQUYsU0FBQUcsaUJBQUEsbUJBQ0EsSUFBQUMsRUFBQUMsRUFBQUMsS0FLQSxTQUFBQyxJQUVBLEdBQUFQLFNBQUFRLGNBQUEsZ0JBQUEsQ0FDQSxJQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBWixTQUFBRyxpQkFBQSxTQUNBVSxPQUFBQyxZQUFBLE1BQUFELE9BQUFDLFdBQUFELE9BQUFFLGFBQ0FOLEVBQUFHLEVBQUEsR0FBQUosY0FBQSxlQUFBUSxZQUNBTixFQUFBLEVBQUEsSUFBQSxJQUNBTyxNQUFBQyxVQUFBQyxRQUFBQyxLQUFBUixFQUFBLFNBQUFTLEdBQ0FBLEVBQUFiLGNBQUEsZUFDQWMsTUFBQUMsT0FBQWIsRUFBQSxTQUdBRCxFQUFBRyxFQUFBLEdBQUFJLFlBQ0FOLEVBQUEsRUFBQSxJQUFBLElBQ0FFLEVBQUEsR0FBQVksVUFBQUMsU0FBQSxVQUNBZixFQUFBLEVBQUEsSUFBQSxLQUVBTyxNQUFBQyxVQUFBQyxRQUFBQyxLQUFBUixFQUFBLFNBQUFTLEdBQ0EsSUFBQUssRUFBQUwsRUFBQWIsY0FBQSxlQUNBRyxFQUFBVSxFQUFBYixjQUFBLGNBQ0FrQixFQUFBSixNQUFBQyxPQUFBYixFQUFBLEtBQ0FDLEVBQUFXLE1BQUFLLElBQUFqQixFQUFBLFFBS0EsR0FBQVYsU0FBQVEsY0FBQSxZQUFBLENBQ0EsSUFDQUUsRUFBQWtCLEVBREFDLEVBQUE3QixTQUFBUSxjQUFBLGtCQUVBSyxPQUFBQyxZQUFBLE1BQUFELE9BQUFDLFdBQUFELE9BQUFFLGFBQ0FjLEVBQUFQLE1BQUFRLE1BQUEsVUFDQUQsRUFBQVAsTUFBQUMsT0FBQSxVQUNBSyxFQUFBQyxFQUFBYixZQUNBTixFQUFBbUIsRUFBQUUsYUFDQUYsRUFBQUcsbUJBQUFWLE1BQUFXLFlBQUEsRUFDQUosRUFBQVAsTUFBQUMsT0FBQWIsRUFBQSxLQUNBbUIsRUFBQUcsbUJBQUF4QixjQUFBLFdBQUFjLE1BQUFZLGFBQUF4QixFQUFBLE1BQ0FHLE9BQUFDLFdBQUEsTUFBQUQsT0FBQUMsV0FBQUQsT0FBQUUsYUFDQWMsRUFBQVAsTUFBQVEsTUFBQSxVQUNBRCxFQUFBUCxNQUFBQyxPQUFBLFVBRUFLLEdBREFsQixFQUFBbUIsRUFBQUUsY0FDQSxJQUFBLElBQ0FGLEVBQUFHLG1CQUFBeEIsY0FBQSxXQUFBYyxNQUFBWSxhQUFBLFVBQ0FMLEVBQUFQLE1BQUFRLE1BQUFGLEVBQUEsS0FDQUMsRUFBQUcsbUJBQUFWLE1BQUFXLFlBQUFMLEVBQUEsR0FBQSxPQUVBQyxFQUFBUCxNQUFBUSxNQUFBLFVBQ0FELEVBQUFQLE1BQUFDLE9BQUEsVUFDQWIsRUFBQW1CLEVBQUFFLGFBQ0FILEVBQUFDLEVBQUFiLFlBQ0FhLEVBQUFHLG1CQUFBeEIsY0FBQSxXQUFBYyxNQUFBWSxhQUFBLFVBQ0FMLEVBQUFQLE1BQUFRLE1BQUFGLEVBQUEsS0FDQUMsRUFBQUcsbUJBQUFWLE1BQUFXLFlBQUFMLEVBQUEsR0FBQSxNQWdCQSxTQUFBTyxFQUFBQyxFQUFBQyxHQUlBQSxFQUFBQyxRQUFBLEtBQUEsSUFIQSxXQUNBRixFQUFBWixVQUFBZSxPQUFBLFVBS0EsR0FwQkF2QyxTQUFBUSxjQUFBLGNBQ0FSLFNBQUFRLGNBQUEsYUFBQVAsaUJBQUEsUUFBQSxLQUNBLElBQUF1QyxFQUFBeEMsU0FBQXlDLGNBQUEsU0FDQUMsRUFBQTdCLE9BQUE4QixTQUFBQyxLQUVBNUMsU0FBQTZDLEtBQUFDLFlBQUFOLEdBQ0FBLEVBQUFPLE1BQUFMLEVBQ0FGLEVBQUFRLFNBQ0FoRCxTQUFBaUQsWUFBQSxRQUNBakQsU0FBQTZDLEtBQUFLLFlBQUFWLEtBV0F4QyxTQUFBUSxjQUFBLGNBQUEsQ0FDQTJDLFFBQUFDLElBQUEvQyxLQUNBLElBQUFnRCxFQUFBckQsU0FBQVEsY0FBQSxjQUNBOEMsRUFBQXRELFNBQUFRLGNBQUEsd0JBQ0ErQyxFQUFBdkQsU0FBQVEsY0FBQSwyQkFDQWdELEVBQUEsRUFDQUMsRUFBQUosRUFBQXJDLFlBQ0EwQyxFQUFBSCxFQUFBdkMsWUFDQTJDLEVBQUEsRUFDQUMsRUFBQTNDLE1BQUFDLFVBQUEyQyxNQUFBekMsS0FBQWxCLEdBQ0E0RCxFQUFBeEQsRUFDQSxTQUFBeUQsRUFBQUMsR0FFQSxHQURBTCxFQUFBLEVBQ0EzRCxTQUFBUSxjQUFBLDJCQUNBLEtBQUFtRCxHQUFBRixFQUFBQyxFQUFBLEVBQUEsSUFBQU0sRUFBQUosRUFBQUssUUFDQU4sR0FBQUcsRUFBQUUsR0FDQUEsU0FHQSxLQUFBTCxHQUFBRixFQUFBQyxFQUFBLEdBQUFNLEVBQUFKLEVBQUFLLFFBQ0FOLEdBQUFHLEVBQUFFLEdBQ0FBLElBR0EsT0FBQUEsRUFFQVIsRUFBQU8sRUFBQVAsR0FDQSxJQUFBVSxFQUFBbEUsU0FBQUcsaUJBQUEsbUJBRUEsR0FBQUMsRUFBQSxDQUVBLEdBREFvRCxHQUFBLEVBQ0FuRCxJQUFBbUQsRUFBQSxDQUNBLElBQUFXLEVBQUFMLEVBQUF6RCxLQUNBdUQsRUFBQVEsT0FBQS9ELElBQUEsR0FDQXlELEVBQUFNLE9BQUEvRCxJQUFBLEdBQ0EsSUFBQWdFLEVBQUFiLEVBQUEsRUFDQUksRUFBQVEsT0FBQUMsRUFBQSxFQUFBakUsR0FDQTBELEVBQUFNLE9BQUFDLEVBQUEsRUFBQUYsR0FHQVgsRUFBQU8sRUFEQVAsRUFBQSxHQUdBQSxHQUFBLEVBQ0F2QyxNQUFBQyxVQUFBQyxRQUFBQyxLQUFBOEMsRUFBQSxTQUFBN0MsR0FDQUEsRUFBQWlELFdBRUEsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFmLEVBQUFlLElBQ0FoQixFQUFBaUIsT0FBQVosRUFBQVcsSUFFQSxJQUFBLElBQUFFLEVBQUFqQixFQUFBaUIsRUFBQWIsRUFBQUssT0FBQVEsSUFDQW5CLEVBQUFvQixPQUFBZCxFQUFBYSxJQUlBLEdBQUF6RSxTQUFBUSxjQUFBLGdCQUFBUixTQUFBUSxjQUFBLGNBQUEsQ0FDQSxNQUFBbUUsRUFBQTNFLFNBQUFRLGNBQUEsZ0JBQ0FvRSxFQUFBRCxFQUFBbkUsY0FBQSxTQUNBcUUsRUFBQUYsRUFBQW5FLGNBQUEsYUFDQSxJQUFBMkIsRUFBQXlDLEVBQUFDLEdBQ0EsTUFBQUMsRUFBQTlFLFNBQUFRLGNBQUEsb0JBQ0F1RSxFQUFBRCxFQUFBdEUsY0FBQSxhQUNBd0UsRUFBQUYsRUFBQXRFLGNBQUEsYUFDQSxJQUFBMkIsRUFBQTRDLEVBQUFDLEdBQ0EsTUFBQUMsRUFBQWpGLFNBQUFRLGNBQUEsd0JBQ0EwRSxFQUFBRCxFQUFBekUsY0FBQSxpQkFDQTJFLEVBQUFGLEVBQUF6RSxjQUFBLGFBQ0EsSUFBQTJCLEVBQUErQyxFQUFBQyxHQUNBLE1BQUFDLEVBQUFwRixTQUFBUSxjQUFBLDJCQUNBNkUsRUFBQUQsRUFBQTVFLGNBQUEsYUFDQThFLEVBQUFGLEVBQUE1RSxjQUFBLGVBQ0EsSUFBQTJCLEVBQUFrRCxFQUFBQyxHQUVBdEYsU0FBQXNDLFFBQUEsQ0FBQWlELElBQ0EsSUFBQUMsRUFBQUQsRUFBQUMsT0FDQUMsRUFBQUQsR0FBQVosR0FBQUEsRUFBQW5ELFNBQUErRCxHQUNBRSxFQUFBRixHQUFBWCxFQUNBYyxFQUFBZixFQUFBcEQsVUFBQUMsU0FBQSxRQUNBbUUsRUFBQUosR0FBQVQsR0FBQUEsRUFBQXRELFNBQUErRCxHQUNBSyxFQUFBTCxHQUFBUixFQUNBYyxFQUFBZixFQUFBdkQsVUFBQUMsU0FBQSxRQUNBc0UsRUFBQVAsR0FBQU4sR0FBQUEsRUFBQXpELFNBQUErRCxHQUNBUSxFQUFBUixHQUFBTCxFQUNBYyxFQUFBZixFQUFBMUQsVUFBQUMsU0FBQSxRQUNBeUUsRUFBQVYsR0FBQUgsR0FBQUEsRUFBQTVELFNBQUErRCxHQUNBVyxFQUFBWCxHQUFBRixFQUNBYyxFQUFBZixFQUFBN0QsVUFBQUMsU0FBQSxRQUVBZ0UsR0FBQUMsSUFBQUMsR0FDQWYsRUFBQXBELFVBQUFlLE9BQUEsUUFFQXFELEdBQUFDLElBQUFDLEdBQ0FmLEVBQUF2RCxVQUFBZSxPQUFBLFFBRUF3RCxHQUFBQyxJQUFBQyxHQUNBZixFQUFBMUQsVUFBQWUsT0FBQSxRQUVBMkQsR0FBQUMsSUFBQUMsR0FDQWYsRUFBQTdELFVBQUFlLE9BQUEsV0FoTEF2QyxTQUFBUSxjQUFBLGdCQUNBUyxNQUFBQyxVQUFBQyxRQUFBQyxLQUFBbEIsRUFBQSxTQUFBbUIsR0FDQWYsRUFBQStGLEtBQUFoRixFQUFBTCxZQUFBLE1BTkFaLEVBQUFKLFNBQUFRLGNBQUEsMkJBQ0FILEVBQUEsV0FDQSxHQUFBLE9BQUFELEVBQ0EsT0FBQWEsTUFBQUMsVUFBQTJDLE1BQUF6QyxLQUFBbEIsR0FBQW9HLFFBQUFsRyxLQXdMQSxJQUFBRyxFQUVBTSxPQUFBMEYsU0FBQWhHIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g0JDQvdCw0LvQvtCzICQoZG9jdW1lbnQpLnJlYWR5KClcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgY29uc3QgdGFnc0xpc3REZWZhdWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1haW4gLm5hdiAudGFnJyk7XG4gIGxldCB0YWdzV2lkdGhMaXN0RGVmYXVsdCA9IFtdLCBjdXJyZW50VGFnLCBjdXJyZW50VGFnSW5kZXg7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbiAubmF2JykpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRhZ3NMaXN0RGVmYXVsdCwgZnVuY3Rpb24oZWxlbSkge1xuICAgICAgdGFnc1dpZHRoTGlzdERlZmF1bHQucHVzaCggZWxlbS5vZmZzZXRXaWR0aCArIDEyICk7XG4gICAgfSk7XG4gICAgY3VycmVudFRhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluIC5uYXYgLnRhZy5jdXJyZW50Jyk7XG4gICAgY3VycmVudFRhZ0luZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoY3VycmVudFRhZyAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGFnc0xpc3REZWZhdWx0KS5pbmRleE9mKGN1cnJlbnRUYWcpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBTdGFydFNjcmlwdHMoKSB7XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXBpbGF0aW9uJykpIHtcbiAgICAgIGxldCBpdGVtc09uUGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJyksIGl0ZW1XaWR0aCwgaW1hZ2VIZWlnaHQsIGl0ZW1UYWdzO1xuICAgICAgaWYgKCh3aW5kb3cuaW5uZXJXaWR0aCA8PSAxMDI0KSAmJiAod2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQpKSB7IC8vcG9ydHJhaXRcbiAgICAgICAgaXRlbVdpZHRoID0gaXRlbXNPblBhZ2VbMF0ucXVlcnlTZWxlY3RvcignLml0ZW1faW1hZ2UnKS5vZmZzZXRXaWR0aDtcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSAoaXRlbVdpZHRoKSAvIDE0MSAqIDIxMjtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtc09uUGFnZSwgZnVuY3Rpb24oZWxlbSl7XG4gICAgICAgICAgbGV0IGltYWdlID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuaXRlbV9pbWFnZScpO1xuICAgICAgICAgIGltYWdlLnN0eWxlLmhlaWdodCA9IGltYWdlSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtV2lkdGggPSBpdGVtc09uUGFnZVswXS5vZmZzZXRXaWR0aDtcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSAoaXRlbVdpZHRoKSAvIDE0MSAqIDIxMjtcbiAgICAgICAgaWYgKGl0ZW1zT25QYWdlWzBdLmNsYXNzTGlzdC5jb250YWlucygnd2lkZScpKSB7XG4gICAgICAgICAgaW1hZ2VIZWlnaHQgPSAoaXRlbVdpZHRoKSAvIDE1MSAqIDEwNjtcbiAgICAgICAgfVxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGl0ZW1zT25QYWdlLCBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICBsZXQgaW1hZ2UgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5pdGVtX2ltYWdlJyk7XG4gICAgICAgICAgaXRlbVRhZ3MgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5pdGVtX3RhZ3MnKTtcbiAgICAgICAgICBpbWFnZS5zdHlsZS5oZWlnaHQgPSBpbWFnZUhlaWdodCArICdweCc7XG4gICAgICAgICAgaXRlbVRhZ3Muc3R5bGUudG9wID0gaW1hZ2VIZWlnaHQgKyAncHgnO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKSkge1xuICAgICAgbGV0IGFydGljbGVJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlX2ltYWdlJyksXG4gICAgICAgICAgaW1hZ2VIZWlnaHQsIGltYWdlV2lkdGg7XG4gICAgICBpZiAoICh3aW5kb3cuaW5uZXJXaWR0aCA8PSAxMDI0KSAmJiAod2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQpICkgeyAvL3BvcnRyYWl0XG4gICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9ICdpbmhlcml0JztcbiAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLmhlaWdodCA9ICdpbmhlcml0JztcbiAgICAgICAgaW1hZ2VXaWR0aCA9IGFydGljbGVJbWFnZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSBhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBhcnRpY2xlSW1hZ2UubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLnBhZGRpbmdMZWZ0ID0gMDtcbiAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLmhlaWdodCA9IGltYWdlSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgYXJ0aWNsZUltYWdlLm5leHRFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJykuc3R5bGUubWFyZ2luQm90dG9tID0gaW1hZ2VIZWlnaHQgKyAncHgnO1xuICAgICAgfSBlbHNlIGlmICgod2luZG93LmlubmVyV2lkdGggPiAxMDI0KSAmJiAod2luZG93LmlubmVyV2lkdGggPiB3aW5kb3cuaW5uZXJIZWlnaHQpKSB7IC8vbGFuZHNjYXBlXG4gICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9ICdpbmhlcml0JztcbiAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLmhlaWdodCA9ICdpbmhlcml0JztcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSBhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBpbWFnZVdpZHRoID0gKGltYWdlSGVpZ2h0KSAvIDIxMiAqIDE0MTtcbiAgICAgICAgYXJ0aWNsZUltYWdlLm5leHRFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJykuc3R5bGUubWFyZ2luQm90dG9tID0gJ2luaGVyaXQnO1xuICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUud2lkdGggPSBpbWFnZVdpZHRoICsgJ3B4JztcbiAgICAgICAgYXJ0aWNsZUltYWdlLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5wYWRkaW5nTGVmdCA9IChpbWFnZVdpZHRoICsgNjQpICsgJ3B4JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9ICdpbmhlcml0JztcbiAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLmhlaWdodCA9ICdpbmhlcml0JztcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSBhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBpbWFnZVdpZHRoID0gYXJ0aWNsZUltYWdlLm9mZnNldFdpZHRoO1xuICAgICAgICBhcnRpY2xlSW1hZ2UubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnaW5oZXJpdCc7XG4gICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9IGltYWdlV2lkdGggKyAncHgnO1xuICAgICAgICBhcnRpY2xlSW1hZ2UubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLnBhZGRpbmdMZWZ0ID0gKGltYWdlV2lkdGggKyA0OCkgKyAncHgnO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvcHlMaW5rJykpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3B5TGluaycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsZXQgZHVtbXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpLFxuICAgICAgICAgICAgdGV4dCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZHVtbXkpO1xuICAgICAgICBkdW1teS52YWx1ZSA9IHRleHQ7XG4gICAgICAgIGR1bW15LnNlbGVjdCgpO1xuICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGR1bW15KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFRvZ2dsZUJsb2NrKGJsb2NrLCBidXR0b24pIHtcbiAgICAgIGxldCBUb2dnbGVNZW51ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGJsb2NrLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgIH07XG4gICAgICBidXR0b24ub25jbGljayA9ICgpID0+IChuZXcgVG9nZ2xlTWVudSgpKTtcbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4gLm5hdicpKSB7XG4gICAgICBjb25zb2xlLmxvZyhjdXJyZW50VGFnSW5kZXgoKSk7XG4gICAgICBsZXQgdGFnTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4gLm5hdicpLFxuICAgICAgICAgIHRhZ01vcmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4gLm5hdiAudGFnX2xpc3QnKSxcbiAgICAgICAgICB0YWdNb3JlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4gLm5hdiAudGFnLXdyYXBwZXInKSxcbiAgICAgICAgICBpID0gMCxcbiAgICAgICAgICB0YWdOYXZXaWR0aCA9IHRhZ05hdi5vZmZzZXRXaWR0aCxcbiAgICAgICAgICB0YWdNb3JlQnV0dG9uV2lkdGggPSB0YWdNb3JlQnV0dG9uLm9mZnNldFdpZHRoLFxuICAgICAgICAgIHRhZ3NWaXNpYmxlV2lkdGggPSAwLFxuICAgICAgICAgIHRhZ3NMaXN0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGFnc0xpc3REZWZhdWx0KSxcbiAgICAgICAgICB0YWdzV2lkdGhMaXN0ID0gdGFnc1dpZHRoTGlzdERlZmF1bHQ7XG4gICAgICBmdW5jdGlvbiBGaW5kVGFnc1Zpc2libGVXaWR0aChpbmRleCkge1xuICAgICAgICB0YWdzVmlzaWJsZVdpZHRoID0gMDtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluIC5uYXYgLnRhZy5jdXJyZW50JykpIHtcbiAgICAgICAgICB3aGlsZSAoKHRhZ3NWaXNpYmxlV2lkdGggPD0gKHRhZ05hdldpZHRoIC0gdGFnTW9yZUJ1dHRvbldpZHRoIC0gNiAtIDI2KSkgJiYgKGluZGV4IDwgdGFnc0xpc3QubGVuZ3RoKSkge1xuICAgICAgICAgICAgdGFnc1Zpc2libGVXaWR0aCA9IHRhZ3NWaXNpYmxlV2lkdGggKyB0YWdzV2lkdGhMaXN0W2luZGV4XTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdoaWxlICgodGFnc1Zpc2libGVXaWR0aCA8PSAodGFnTmF2V2lkdGggLSB0YWdNb3JlQnV0dG9uV2lkdGggLSA2KSkgJiYgKGluZGV4IDwgdGFnc0xpc3QubGVuZ3RoKSkge1xuICAgICAgICAgICAgdGFnc1Zpc2libGVXaWR0aCA9IHRhZ3NWaXNpYmxlV2lkdGggKyB0YWdzV2lkdGhMaXN0W2luZGV4XTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIGkgPSBGaW5kVGFnc1Zpc2libGVXaWR0aChpKTtcbiAgICAgIGxldCBhbGxOYXZUYWdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1haW4gLm5hdiAudGFnJyk7XG5cbiAgICAgIGlmIChjdXJyZW50VGFnKSB7XG4gICAgICAgIGkgPSBpIC0gMTtcbiAgICAgICAgaWYgKGN1cnJlbnRUYWdJbmRleCgpID4gaSkge1xuICAgICAgICAgIGxldCBjdXJyZW50VGFnV2lkdGggPSB0YWdzV2lkdGhMaXN0W2N1cnJlbnRUYWdJbmRleCgpXTtcbiAgICAgICAgICB0YWdzTGlzdC5zcGxpY2UoY3VycmVudFRhZ0luZGV4KCksIDEpO1xuICAgICAgICAgIHRhZ3NXaWR0aExpc3Quc3BsaWNlKGN1cnJlbnRUYWdJbmRleCgpLCAxKTtcbiAgICAgICAgICBsZXQgayA9IGkgLSAxO1xuICAgICAgICAgIHRhZ3NMaXN0LnNwbGljZShrLCAwLCBjdXJyZW50VGFnKTtcbiAgICAgICAgICB0YWdzV2lkdGhMaXN0LnNwbGljZShrLCAwLCBjdXJyZW50VGFnV2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGkgPSAwO1xuICAgICAgICBpID0gRmluZFRhZ3NWaXNpYmxlV2lkdGgoaSk7XG4gICAgICB9XG4gICAgICBpID0gaSAtIDE7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGFsbE5hdlRhZ3MsIGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0ucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgaTsgYisrKSB7XG4gICAgICAgIHRhZ01vcmVCdXR0b24uYmVmb3JlKHRhZ3NMaXN0W2JdKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGwgPSBpOyBsIDwgdGFnc0xpc3QubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgdGFnTW9yZUxpc3QuYXBwZW5kKHRhZ3NMaXN0W2xdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90b3AnKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbiAubmF2JykpIHtcbiAgICAgIGNvbnN0IG1lbnVXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9tZW51JyksXG4gICAgICAgICAgICBtZW51ID0gbWVudVdyYXBwZXIucXVlcnlTZWxlY3RvcignLm1lbnUnKSxcbiAgICAgICAgICAgIG1lbnVCdXR0b24gPSBtZW51V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuYnRuLWljb24nKTtcbiAgICAgIG5ldyBUb2dnbGVCbG9jayhtZW51LCBtZW51QnV0dG9uKTtcbiAgICAgIGNvbnN0IGxhbmd1YWdlV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbGFuZ3VhZ2UnKSxcbiAgICAgICAgICAgIGxhbmd1YWdlID0gbGFuZ3VhZ2VXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5sYW5ndWFnZScpLFxuICAgICAgICAgICAgbGFuZ3VhZ2VCdXR0b24gPSBsYW5ndWFnZVdyYXBwZXIucXVlcnlTZWxlY3RvcignLmJ0bi1pY29uJyk7XG4gICAgICBuZXcgVG9nZ2xlQmxvY2sobGFuZ3VhZ2UsIGxhbmd1YWdlQnV0dG9uKTtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX25vdGlmaWNhdGlvbicpLFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcubm90aWZpY2F0aW9uJyksXG4gICAgICAgICAgICBub3RpZmljYXRpb25CdXR0b24gPSBub3RpZmljYXRpb25XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5idG4taWNvbicpO1xuICAgICAgbmV3IFRvZ2dsZUJsb2NrKG5vdGlmaWNhdGlvbiwgbm90aWZpY2F0aW9uQnV0dG9uKTtcbiAgICAgIGNvbnN0IG5hdldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbiAubmF2IC50YWctd3JhcHBlcicpLFxuICAgICAgICBuYXZMaXN0ID0gbmF2V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFnX2xpc3QnKSxcbiAgICAgICAgbmF2QnV0dG9uID0gbmF2V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFnLWJ1dHRvbicpO1xuICAgICAgbmV3IFRvZ2dsZUJsb2NrKG5hdkxpc3QsIG5hdkJ1dHRvbik7XG5cbiAgICAgIGRvY3VtZW50Lm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQsXG4gICAgICAgICAgaXRzTWVudSA9IHRhcmdldCA9PSBtZW51IHx8IG1lbnUuY29udGFpbnModGFyZ2V0KSxcbiAgICAgICAgICBpdHNNZW51QnV0dG9uID0gdGFyZ2V0ID09IG1lbnVCdXR0b24sXG4gICAgICAgICAgbWVudUlzQWN0aXZlID0gbWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSxcbiAgICAgICAgICBpdHNMYW5ndWFnZSA9IHRhcmdldCA9PSBsYW5ndWFnZSB8fCBsYW5ndWFnZS5jb250YWlucyh0YXJnZXQpLFxuICAgICAgICAgIGl0c0xhbmd1YWdlQnV0dG9uID0gdGFyZ2V0ID09IGxhbmd1YWdlQnV0dG9uLFxuICAgICAgICAgIGxhbmd1YWdlSXNBY3RpdmUgPSBsYW5ndWFnZS5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSxcbiAgICAgICAgICBpdHNOb3RpZmljYXRpb24gPSB0YXJnZXQgPT0gbm90aWZpY2F0aW9uIHx8IG5vdGlmaWNhdGlvbi5jb250YWlucyh0YXJnZXQpLFxuICAgICAgICAgIGl0c05vdGlmaWNhdGlvbkJ1dHRvbiA9IHRhcmdldCA9PSBub3RpZmljYXRpb25CdXR0b24sXG4gICAgICAgICAgbm90aWZpY2F0aW9uSXNBY3RpdmUgPSBub3RpZmljYXRpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJyksXG4gICAgICAgICAgaXRzTGlzdCA9IHRhcmdldCA9PSBuYXZMaXN0IHx8IG5hdkxpc3QuY29udGFpbnModGFyZ2V0KSxcbiAgICAgICAgICBpdHNMaXN0QnV0dG9uID0gdGFyZ2V0ID09IG5hdkJ1dHRvbixcbiAgICAgICAgICBsaXN0SXNBY3RpdmUgPSBuYXZMaXN0LmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpO1xuXG4gICAgICAgIGlmICghaXRzTWVudSAmJiAhaXRzTWVudUJ1dHRvbiAmJiBtZW51SXNBY3RpdmUpIHtcbiAgICAgICAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWl0c0xhbmd1YWdlICYmICFpdHNMYW5ndWFnZUJ1dHRvbiAmJiBsYW5ndWFnZUlzQWN0aXZlKSB7XG4gICAgICAgICAgbGFuZ3VhZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXRzTm90aWZpY2F0aW9uICYmICFpdHNOb3RpZmljYXRpb25CdXR0b24gJiYgbm90aWZpY2F0aW9uSXNBY3RpdmUpIHtcbiAgICAgICAgICBub3RpZmljYXRpb24uY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXRzTGlzdCAmJiAhaXRzTGlzdEJ1dHRvbiAmJiBsaXN0SXNBY3RpdmUpIHtcbiAgICAgICAgICBuYXZMaXN0LmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH1cbiAgfVxuXG4gIG5ldyBTdGFydFNjcmlwdHMoKTtcblxuICB3aW5kb3cub25yZXNpemUgPSBTdGFydFNjcmlwdHM7XG59KTtcblxuXG4vLyAvLyDQldGB0LvQuCDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0L3QsNC50LTQtdC9INC+0LTQuNC9INGN0LvQtdC80LXQvdGCXG4vLyBpZigoZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVwiKSkgIT09IG51bGwpXG4vLyAgIGUuY2xhc3NMaXN0LmFkZCgnbGFzdCcpOyAvLyDQkNC90LDQu9C+0LMg0LLRi9Cx0L7RgNC60Lgg0Lgg0L/RgNC40YHQstC+0LXQvdC40Y8g0LrQu9Cw0YHRgdCwXG4vLyAvLyDQldGB0LvQuCDRjdC70LXQvNC10L3RgtC+0LIg0LHRg9C00LXRgiDQvNC90L7Qs9C+XG4vLyBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjZm9ybVwiKSwgZnVuY3Rpb24oZSl7XG4vLyAgIGUuY2xhc3NMaXN0LmFkZCgnbGFzdCcpO1xuLy8gfSk7XG4iXX0=
