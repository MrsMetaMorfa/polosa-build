/*!
 * gulp-nunjucks-sass-template
 * A Gulp 4 template including SCSS, Nunjucks, JS and more
 *
 * Url: https://github.com/DefaultSimon
 * Author: Simon Goričar
 * Copyright 2019-2020. MIT licensed.
 */
document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".header_tags .tag");let t,o,r=[];function n(){if(console.log(window.innerWidth>=1024,window.innerWidth>window.innerHeight),document.querySelector(".compilation")){let e,t,o,r=document.querySelectorAll(".compilation .item");window.innerWidth<1024&&window.innerWidth<window.innerHeight?(e=r[0].querySelector(".item_image").offsetWidth,t=e/2*3,Array.prototype.forEach.call(r,function(e){e.querySelector(".item_image").style.height=t+"px"})):(e=r[0].offsetWidth,t=r[0].classList.contains("wide")?(e-40)/151*106:(e-40)/53*76,Array.prototype.forEach.call(r,function(e){let r=e.querySelector(".item_image");o=e.querySelector(".item_tags"),r.style.height=t+"px",o.style.top=t+"px"}))}function n(e,t){t&&(t.onclick=(()=>new function(){e.classList.toggle("open")}))}if(document.querySelector("#copyLink")&&document.querySelector("#copyLink").addEventListener("click",()=>{let e=document.createElement("input"),t=window.location.href;document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}),document.querySelector(".header_tags")){let n=document.querySelector(".header_tags"),l=document.querySelector(".header_tags .tag_list"),i=document.querySelector(".header_tags .tag-wrapper"),a=0,s=n.offsetWidth,u=i.offsetWidth,d=0,f=Array.prototype.slice.call(e),y=r.slice();function c(e){if(d=u-24,document.querySelector(".header_tags .tag.current"))do{d+=y[e],e++}while(d<=s-u-24-26&&e<f.length);else do{d+=y[e],e++}while(d<=s-u-24&&e<f.length);return e}a=c(a);let h=document.querySelectorAll(".header_tags .tag");if(t){if(o()>a){let e=y[o()];f.splice(o(),1),y.splice(o(),1);let r=a-1;f.splice(r,0,t),y.splice(r,0,e)}a=c(a=0)}Array.prototype.forEach.call(h,function(e){e.remove()});for(let e=0;e<a;e++)i.before(f[e]);for(let e=a;e<f.length;e++)l.append(f[e]);n.style.flexWrap="nowrap"}if(document.querySelector(".header_tags")||document.querySelector(".header_menu")||document.querySelector(".header_notification")||document.querySelector(".header_language")||document.querySelector(".article .share")){let e,t,o,r,c,l,i,a,s,u,d,f,y,h,g;document.querySelector(".header_menu")&&(e=document.querySelector(".header_menu"),t=e.querySelector(".menu"),o=e.querySelector(".btn-icon")),new n(t,o),document.querySelector(".header_language")&&(r=document.querySelector(".header_language"),c=r.querySelector(".language"),l=r.querySelector(".btn-icon")),new n(c,l),document.querySelector(".header_notification")&&(i=document.querySelector(".header_notification"),a=i.querySelector(".notification"),s=i.querySelector(".btn-icon")),new n(a,s),document.querySelector(".header_tags")&&(u=document.querySelector(".header_tags .tag-wrapper"),d=u.querySelector(".tag_list"),f=u.querySelector(".tag-button")),new n(d,f),document.querySelector(".article .share")&&(y=document.querySelector(".article .share"),h=y.querySelector(".share_list"),g=y.querySelector(".share_button")),new n(h,g),document.onclick=(e=>{let r,n,i,u,y,m,p,q,S,w,_,H,x,L,W,b=e.target;document.querySelector(".header_menu")&&(r=b===t||t.contains(b),n=b===o,i=t.classList.contains("open")),document.querySelector(".header_language")&&(u=b===c||c.contains(b),y=b===l,m=c.classList.contains("open")),document.querySelector(".header_notification")&&(p=b===a||a.contains(b),q=b===s,S=a.classList.contains("open")),document.querySelector(".header_tags")&&(w=b===d||d.contains(b),_=b===f,H=d.classList.contains("open")),document.querySelector(".article .share")&&(x=b===h||h.contains(b),L=b===g,W=h.classList.contains("open")),document.querySelector(".header_menu")&&!r&&!n&&i&&t.classList.toggle("open"),document.querySelector(".header_language")&&!u&&!y&&m&&c.classList.toggle("open"),document.querySelector(".header_notification")&&!p&&!q&&S&&a.classList.toggle("open"),document.querySelector(".header_tags")&&!w&&!_&&H&&d.classList.toggle("open"),console.log(document.querySelector(".article .share"),h,!x,!L,W),document.querySelector(".article .share")&&!x&&!L&&W&&h.classList.toggle("open")})}let l=document.querySelector(".article"),i=document.querySelector(".article_image");if(l)if(console.log(i.offsetWidth,i.offsetHeight),document.querySelector(".article_image-picture").style.height="auto",i.style.width="auto",window.innerWidth>window.innerHeight&&window.innerWidth>1024){let e,t,o=document.querySelector(".article_image-picture"),r=document.querySelector(".article_image-caption");o.style.height="auto",l.offsetWidth/2<l.querySelector(".wrapper").offsetWidth&&l.offsetWidth<1100?(console.log("tablet landscape"),o.offsetHeight+r.offsetHeight+80>window.innerHeight?e=(t=l.offsetWidth/2-120)/102*153:(o.style.height=i.offsetHeight-r.offsetHeight+"px",t=(e=o.offsetHeight)/153*102),i.style.width=t+"px",document.querySelector(".article").style.paddingLeft=t+40+"px"):(o.offsetHeight+r.offsetHeight+80>window.innerHeight&&(o.style.height=i.offsetHeight-r.offsetHeight+"px"),t=(e=o.offsetHeight)/153*102,i.style.width=t+"px",document.querySelector(".article").style.paddingLeft=t+40+"px");let n=0,c=0;document.onscroll=function(){if(document.querySelector(".article")){let e,t=document.querySelector("section.article").offsetHeight,o=document.querySelector(".header").offsetHeight,r=document.querySelector(".banners_container"),l=r.offsetHeight,a=document.querySelector(".banners_wrapper").offsetHeight,s=document.querySelector(".content").offsetHeight,u=pageYOffset-n;l-a>0&&(l-a>(c+=e=u/(s/(l-a+140)))?r.style.transform="translateY("+-1*c+"px)":l-a<=c?r.style.transform="translateY("+-1*(l-a)+"px)":c<0&&(r.style.transform="translateY(0px)")),console.log(pageYOffset,t+o-80-i.offsetHeight),console.log(t,o,i.offsetHeight),pageYOffset>73&&pageYOffset<o+t-80-(i.offsetHeight+40)?(i.style.position="fixed",i.style.top="40px",i.style.bottom="auto",i.style.width=i.offsetWidth+"px"):pageYOffset>73&&pageYOffset>=o+t-80-(i.offsetHeight+40)?(i.style.position="absolute",i.style.top="auto",i.style.bottom="80px",i.style.width=i.offsetWidth+"px"):(i.style.position="absolute",i.style.top="40px",i.style.bottom="auto",i.style.width=i.offsetWidth+"px"),n=pageYOffset}}}else document.querySelector(".article").style.paddingLeft="16px"}document.querySelector(".header_tags")&&(Array.prototype.forEach.call(e,function(e){r.push(e.offsetWidth+12)}),t=document.querySelector(".header_tags .tag.current"),o=function(){if(null!==t)return Array.prototype.slice.call(e).indexOf(t)}),new n,window.onresize=n});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidGFnc0xpc3REZWZhdWx0IiwicXVlcnlTZWxlY3RvckFsbCIsImN1cnJlbnRUYWciLCJjdXJyZW50VGFnSW5kZXgiLCJ0YWdzV2lkdGhMaXN0RGVmYXVsdCIsIlN0YXJ0U2NyaXB0cyIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJxdWVyeVNlbGVjdG9yIiwiaXRlbVdpZHRoIiwiaW1hZ2VIZWlnaHQiLCJpdGVtVGFncyIsIml0ZW1zT25QYWdlIiwib2Zmc2V0V2lkdGgiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsIiwiZWxlbSIsInN0eWxlIiwiaGVpZ2h0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbWFnZSIsInRvcCIsIlRvZ2dsZUJsb2NrIiwiYmxvY2siLCJidXR0b24iLCJvbmNsaWNrIiwidG9nZ2xlIiwiZHVtbXkiLCJjcmVhdGVFbGVtZW50IiwidGV4dCIsImxvY2F0aW9uIiwiaHJlZiIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInZhbHVlIiwic2VsZWN0IiwiZXhlY0NvbW1hbmQiLCJyZW1vdmVDaGlsZCIsInRhZ05hdiIsInRhZ01vcmVMaXN0IiwidGFnTW9yZUJ1dHRvbiIsImkiLCJ0YWdOYXZXaWR0aCIsInRhZ01vcmVCdXR0b25XaWR0aCIsInRhZ3NWaXNpYmxlV2lkdGgiLCJ0YWdzTGlzdCIsInNsaWNlIiwidGFnc1dpZHRoTGlzdCIsIkZpbmRUYWdzVmlzaWJsZVdpZHRoIiwiaW5kZXgiLCJsZW5ndGgiLCJhbGxOYXZUYWdzIiwiY3VycmVudFRhZ1dpZHRoIiwic3BsaWNlIiwiayIsInJlbW92ZSIsImIiLCJiZWZvcmUiLCJsIiwiYXBwZW5kIiwiZmxleFdyYXAiLCJtZW51V3JhcHBlciIsIm1lbnUiLCJtZW51QnV0dG9uIiwibGFuZ3VhZ2VXcmFwcGVyIiwibGFuZ3VhZ2UiLCJsYW5ndWFnZUJ1dHRvbiIsIm5vdGlmaWNhdGlvbldyYXBwZXIiLCJub3RpZmljYXRpb24iLCJub3RpZmljYXRpb25CdXR0b24iLCJuYXZXcmFwcGVyIiwibmF2TGlzdCIsIm5hdkJ1dHRvbiIsInNoYXJlV3JhcHBlciIsInNoYXJlTGlzdCIsInNoYXJlQnV0dG9uIiwiZSIsIml0c01lbnUiLCJpdHNNZW51QnV0dG9uIiwibWVudUlzQWN0aXZlIiwiaXRzTGFuZ3VhZ2UiLCJpdHNMYW5ndWFnZUJ1dHRvbiIsImxhbmd1YWdlSXNBY3RpdmUiLCJpdHNOb3RpZmljYXRpb24iLCJpdHNOb3RpZmljYXRpb25CdXR0b24iLCJub3RpZmljYXRpb25Jc0FjdGl2ZSIsIml0c0xpc3QiLCJpdHNMaXN0QnV0dG9uIiwibGlzdElzQWN0aXZlIiwiaXRzU2hhcmVMaXN0IiwiaXRzU2hhcmVMaXN0QnV0dG9uIiwic2hhcmVMaXN0SXNBY3RpdmUiLCJ0YXJnZXQiLCJhcnRpY2xlIiwiYXJ0aWNsZUltYWdlIiwib2Zmc2V0SGVpZ2h0Iiwid2lkdGgiLCJwaWN0dXJlSGVpZ2h0IiwicGljdHVyZVdpZHRoIiwicGljdHVyZSIsImNhcHRpb24iLCJwYWRkaW5nTGVmdCIsImN1cnJlbnRQYWdlWVBvc2l0aW9uIiwiYmFubmVyc1Njcm9sbCIsIm9uc2Nyb2xsIiwiYmFubmVyc1Njcm9sbE5ldyIsImFydGljbGVIZWlnaHQiLCJoZWFkZXJIZWlnaHQiLCJiYW5uZXJzQ29udGFpbmVyIiwiYmFubmVyc0NvbnRhaW5lckhlaWdodCIsImJhbm5lcnNXcmFwcGVySGVpZ2h0IiwiY29udGVudEhlaWdodCIsInNjcm9sbERpZmZlcmVuY2UiLCJwYWdlWU9mZnNldCIsInRyYW5zZm9ybSIsInBvc2l0aW9uIiwiYm90dG9tIiwicHVzaCIsImluZGV4T2YiLCJvbnJlc2l6ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQUEsU0FBQUMsaUJBQUEsbUJBQUEsV0FDQSxNQUFBQyxFQUFBRixTQUFBRyxpQkFBQSxxQkFDQSxJQUFBQyxF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dEIsRUFBQTlFLE1BQUFnRixNQUFBRixFQUFBcEYsWUFBQSxPQUVBb0YsRUFBQTlFLE1BQUFtRyxTQUFBLFdBQ0FyQixFQUFBOUUsTUFBQUssSUFBQSxPQUNBeUUsRUFBQTlFLE1BQUFvRyxPQUFBLE9BQ0F0QixFQUFBOUUsTUFBQWdGLE1BQUFGLEVBQUFwRixZQUFBLE1BR0E0RixFQUFBVyxtQkFJQXpILFNBQUFhLGNBQUEsWUFBQVcsTUFBQXFGLFlBQUEsT0E5UkE3RyxTQUFBYSxjQUFBLGtCQUNBTSxNQUFBQyxVQUFBQyxRQUFBQyxLQUFBcEIsRUFBQSxTQUFBcUIsR0FDQWpCLEVBQUF1SCxLQUFBdEcsRUFBQUwsWUFBQSxNQU5BZCxFQUFBSixTQUFBYSxjQUFBLDZCQUNBUixFQUFBLFdBQ0EsR0FBQSxPQUFBRCxFQUNBLE9BQUFlLE1BQUFDLFVBQUFrQyxNQUFBaEMsS0FBQXBCLEdBQUE0SCxRQUFBMUgsS0FvU0EsSUFBQUcsRUFFQUcsT0FBQXFILFNBQUF4SCIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vINCQ0L3QsNC70L7QsyAkKGRvY3VtZW50KS5yZWFkeSgpXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHRhZ3NMaXN0RGVmYXVsdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfdGFncyAudGFnJyk7XG4gIGxldCB0YWdzV2lkdGhMaXN0RGVmYXVsdCA9IFtdLCBjdXJyZW50VGFnLCBjdXJyZW50VGFnSW5kZXg7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MnKSkge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGFnc0xpc3REZWZhdWx0LCBmdW5jdGlvbihlbGVtKSB7XG4gICAgICB0YWdzV2lkdGhMaXN0RGVmYXVsdC5wdXNoKCBlbGVtLm9mZnNldFdpZHRoICsgMTIgKTtcbiAgICB9KTtcbiAgICBjdXJyZW50VGFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzIC50YWcuY3VycmVudCcpO1xuICAgIGN1cnJlbnRUYWdJbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGN1cnJlbnRUYWcgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRhZ3NMaXN0RGVmYXVsdCkuaW5kZXhPZihjdXJyZW50VGFnKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gU3RhcnRTY3JpcHRzKCkge1xuICAgIGNvbnNvbGUubG9nKCh3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMDI0KSwgKHdpbmRvdy5pbm5lcldpZHRoID4gd2luZG93LmlubmVySGVpZ2h0KSk7XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXBpbGF0aW9uJykpIHtcbiAgICAgIGxldCBpdGVtc09uUGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21waWxhdGlvbiAuaXRlbScpLCBpdGVtV2lkdGgsIGltYWdlSGVpZ2h0LCBpdGVtVGFncztcbiAgICAgIGlmICgod2luZG93LmlubmVyV2lkdGggPCAxMDI0KSAmJiAod2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQpKSB7IC8vcG9ydHJhaXRcbiAgICAgICAgaXRlbVdpZHRoID0gaXRlbXNPblBhZ2VbMF0ucXVlcnlTZWxlY3RvcignLml0ZW1faW1hZ2UnKS5vZmZzZXRXaWR0aDtcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSBpdGVtV2lkdGggLyAyICogMztcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtc09uUGFnZSwgZnVuY3Rpb24oZWxlbSl7XG4gICAgICAgICAgbGV0IGltYWdlID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuaXRlbV9pbWFnZScpO1xuICAgICAgICAgIGltYWdlLnN0eWxlLmhlaWdodCA9IGltYWdlSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtV2lkdGggPSBpdGVtc09uUGFnZVswXS5vZmZzZXRXaWR0aDtcbiAgICAgICAgaWYgKGl0ZW1zT25QYWdlWzBdLmNsYXNzTGlzdC5jb250YWlucygnd2lkZScpKSB7XG4gICAgICAgICAgaW1hZ2VIZWlnaHQgPSAoaXRlbVdpZHRoIC0gNDApIC8gMTUxICogMTA2O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGltYWdlSGVpZ2h0ID0gKGl0ZW1XaWR0aCAtIDQwKSAvIDUzICogNzY7XG4gICAgICAgIH1cbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtc09uUGFnZSwgZnVuY3Rpb24oZWxlbSl7XG4gICAgICAgICAgbGV0IGltYWdlID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuaXRlbV9pbWFnZScpO1xuICAgICAgICAgIGl0ZW1UYWdzID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuaXRlbV90YWdzJyk7XG4gICAgICAgICAgaW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gaW1hZ2VIZWlnaHQgKyAncHgnO1xuICAgICAgICAgIGl0ZW1UYWdzLnN0eWxlLnRvcCA9IGltYWdlSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3B5TGluaycpKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29weUxpbmsnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbGV0IGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSxcbiAgICAgICAgICAgIHRleHQgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGR1bW15KTtcbiAgICAgICAgZHVtbXkudmFsdWUgPSB0ZXh0O1xuICAgICAgICBkdW1teS5zZWxlY3QoKTtcbiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkdW1teSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBUb2dnbGVCbG9jayhibG9jaywgYnV0dG9uKSB7XG4gICAgICBsZXQgVG9nZ2xlTWVudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBibG9jay5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICB9O1xuICAgICAgaWYgKGJ1dHRvbikge1xuICAgICAgICBidXR0b24ub25jbGljayA9ICgpID0+IChuZXcgVG9nZ2xlTWVudSgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzJykpIHtcbiAgICAgIGxldCB0YWdOYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MnKSxcbiAgICAgICAgICB0YWdNb3JlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncyAudGFnX2xpc3QnKSxcbiAgICAgICAgICB0YWdNb3JlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzIC50YWctd3JhcHBlcicpLFxuICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgIHRhZ05hdldpZHRoID0gdGFnTmF2Lm9mZnNldFdpZHRoLFxuICAgICAgICAgIHRhZ01vcmVCdXR0b25XaWR0aCA9IHRhZ01vcmVCdXR0b24ub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgdGFnc1Zpc2libGVXaWR0aCA9IDAsXG4gICAgICAgICAgdGFnc0xpc3QgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0YWdzTGlzdERlZmF1bHQpLFxuICAgICAgICAgIHRhZ3NXaWR0aExpc3QgPSB0YWdzV2lkdGhMaXN0RGVmYXVsdC5zbGljZSgpO1xuICAgICAgZnVuY3Rpb24gRmluZFRhZ3NWaXNpYmxlV2lkdGgoaW5kZXgpIHtcbiAgICAgICAgdGFnc1Zpc2libGVXaWR0aCA9IHRhZ01vcmVCdXR0b25XaWR0aCAtIDI0O1xuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzIC50YWcuY3VycmVudCcpKSB7XG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgdGFnc1Zpc2libGVXaWR0aCA9IHRhZ3NWaXNpYmxlV2lkdGggKyB0YWdzV2lkdGhMaXN0W2luZGV4XTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgfSB3aGlsZSAoKHRhZ3NWaXNpYmxlV2lkdGggPD0gKHRhZ05hdldpZHRoIC0gdGFnTW9yZUJ1dHRvbldpZHRoIC0gMjQgLSAyNikpICYmIChpbmRleCA8IHRhZ3NMaXN0Lmxlbmd0aCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIHRhZ3NWaXNpYmxlV2lkdGggPSB0YWdzVmlzaWJsZVdpZHRoICsgdGFnc1dpZHRoTGlzdFtpbmRleF07XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgIH0gd2hpbGUgKCh0YWdzVmlzaWJsZVdpZHRoIDw9ICh0YWdOYXZXaWR0aCAtIHRhZ01vcmVCdXR0b25XaWR0aCAtIDI0KSkgJiYgKGluZGV4IDwgdGFnc0xpc3QubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgICAgaSA9IEZpbmRUYWdzVmlzaWJsZVdpZHRoKGkpO1xuICAgICAgbGV0IGFsbE5hdlRhZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVhZGVyX3RhZ3MgLnRhZycpO1xuICAgICAgaWYgKGN1cnJlbnRUYWcpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRUYWdJbmRleCgpID4gaSkge1xuICAgICAgICAgIGxldCBjdXJyZW50VGFnV2lkdGggPSB0YWdzV2lkdGhMaXN0W2N1cnJlbnRUYWdJbmRleCgpXTtcbiAgICAgICAgICB0YWdzTGlzdC5zcGxpY2UoY3VycmVudFRhZ0luZGV4KCksIDEpO1xuICAgICAgICAgIHRhZ3NXaWR0aExpc3Quc3BsaWNlKGN1cnJlbnRUYWdJbmRleCgpLCAxKTtcbiAgICAgICAgICBsZXQgayA9IGkgLSAxO1xuICAgICAgICAgIHRhZ3NMaXN0LnNwbGljZShrLCAwLCBjdXJyZW50VGFnKTtcbiAgICAgICAgICB0YWdzV2lkdGhMaXN0LnNwbGljZShrLCAwLCBjdXJyZW50VGFnV2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGkgPSAwO1xuICAgICAgICBpID0gRmluZFRhZ3NWaXNpYmxlV2lkdGgoaSk7XG4gICAgICB9XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGFsbE5hdlRhZ3MsIGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0ucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgaTsgYisrKSB7XG4gICAgICAgIHRhZ01vcmVCdXR0b24uYmVmb3JlKHRhZ3NMaXN0W2JdKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGwgPSBpOyBsIDwgdGFnc0xpc3QubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgdGFnTW9yZUxpc3QuYXBwZW5kKHRhZ3NMaXN0W2xdKTtcbiAgICAgIH1cbiAgICAgIHRhZ05hdi5zdHlsZS5mbGV4V3JhcCA9ICdub3dyYXAnO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncycpIHx8XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX21lbnUnKSB8fFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9ub3RpZmljYXRpb24nKSB8fFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9sYW5ndWFnZScpIHx8XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZSAuc2hhcmUnKVxuICAgICkge1xuICAgICAgbGV0IG1lbnVXcmFwcGVyLCBtZW51LCBtZW51QnV0dG9uO1xuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbWVudScpKSB7XG4gICAgICAgIG1lbnVXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9tZW51Jyk7XG4gICAgICAgIG1lbnUgPSBtZW51V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcubWVudScpO1xuICAgICAgICBtZW51QnV0dG9uID0gbWVudVdyYXBwZXIucXVlcnlTZWxlY3RvcignLmJ0bi1pY29uJyk7XG4gICAgICB9XG4gICAgICBuZXcgVG9nZ2xlQmxvY2sobWVudSwgbWVudUJ1dHRvbik7XG5cbiAgICAgIGxldCBsYW5ndWFnZVdyYXBwZXIsIGxhbmd1YWdlLCBsYW5ndWFnZUJ1dHRvbjtcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX2xhbmd1YWdlJykpIHtcbiAgICAgICAgbGFuZ3VhZ2VXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9sYW5ndWFnZScpO1xuICAgICAgICBsYW5ndWFnZSA9IGxhbmd1YWdlV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcubGFuZ3VhZ2UnKTtcbiAgICAgICAgbGFuZ3VhZ2VCdXR0b24gPSBsYW5ndWFnZVdyYXBwZXIucXVlcnlTZWxlY3RvcignLmJ0bi1pY29uJyk7XG4gICAgICB9XG4gICAgICBuZXcgVG9nZ2xlQmxvY2sobGFuZ3VhZ2UsIGxhbmd1YWdlQnV0dG9uKTtcblxuICAgICAgbGV0IG5vdGlmaWNhdGlvbldyYXBwZXIsIG5vdGlmaWNhdGlvbiwgbm90aWZpY2F0aW9uQnV0dG9uO1xuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbm90aWZpY2F0aW9uJykpIHtcbiAgICAgICAgbm90aWZpY2F0aW9uV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbm90aWZpY2F0aW9uJyk7XG4gICAgICAgIG5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbldyYXBwZXIucXVlcnlTZWxlY3RvcignLm5vdGlmaWNhdGlvbicpO1xuICAgICAgICBub3RpZmljYXRpb25CdXR0b24gPSBub3RpZmljYXRpb25XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5idG4taWNvbicpO1xuICAgICAgfVxuICAgICAgbmV3IFRvZ2dsZUJsb2NrKG5vdGlmaWNhdGlvbiwgbm90aWZpY2F0aW9uQnV0dG9uKTtcblxuICAgICAgbGV0IG5hdldyYXBwZXIsIG5hdkxpc3QsIG5hdkJ1dHRvbjtcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MnKSkge1xuICAgICAgICBuYXZXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzIC50YWctd3JhcHBlcicpO1xuICAgICAgICBuYXZMaXN0ID0gbmF2V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFnX2xpc3QnKTtcbiAgICAgICAgbmF2QnV0dG9uID0gbmF2V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFnLWJ1dHRvbicpO1xuICAgICAgfVxuICAgICAgbmV3IFRvZ2dsZUJsb2NrKG5hdkxpc3QsIG5hdkJ1dHRvbik7XG5cbiAgICAgIGxldCBzaGFyZVdyYXBwZXIsIHNoYXJlTGlzdCwgc2hhcmVCdXR0b247XG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUgLnNoYXJlJykpIHtcbiAgICAgICAgc2hhcmVXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUgLnNoYXJlJyk7XG4gICAgICAgIHNoYXJlTGlzdCA9IHNoYXJlV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuc2hhcmVfbGlzdCcpO1xuICAgICAgICBzaGFyZUJ1dHRvbiA9IHNoYXJlV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuc2hhcmVfYnV0dG9uJyk7XG4gICAgICB9XG4gICAgICBuZXcgVG9nZ2xlQmxvY2soc2hhcmVMaXN0LCBzaGFyZUJ1dHRvbik7XG5cbiAgICAgIGRvY3VtZW50Lm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGxldCBpdHNNZW51LCBpdHNNZW51QnV0dG9uLCBtZW51SXNBY3RpdmU7XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX21lbnUnKSkge1xuICAgICAgICAgICAgaXRzTWVudSA9IHRhcmdldCA9PT0gbWVudSB8fCBtZW51LmNvbnRhaW5zKHRhcmdldCk7XG4gICAgICAgICAgICBpdHNNZW51QnV0dG9uID0gdGFyZ2V0ID09PSBtZW51QnV0dG9uO1xuICAgICAgICAgICAgbWVudUlzQWN0aXZlID0gbWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpdHNMYW5ndWFnZSwgaXRzTGFuZ3VhZ2VCdXR0b24sIGxhbmd1YWdlSXNBY3RpdmU7XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX2xhbmd1YWdlJykpIHtcbiAgICAgICAgICBpdHNMYW5ndWFnZSA9IHRhcmdldCA9PT0gbGFuZ3VhZ2UgfHwgbGFuZ3VhZ2UuY29udGFpbnModGFyZ2V0KTtcbiAgICAgICAgICBpdHNMYW5ndWFnZUJ1dHRvbiA9IHRhcmdldCA9PT0gbGFuZ3VhZ2VCdXR0b247XG4gICAgICAgICAgbGFuZ3VhZ2VJc0FjdGl2ZSA9IGxhbmd1YWdlLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGl0c05vdGlmaWNhdGlvbiwgaXRzTm90aWZpY2F0aW9uQnV0dG9uLCBub3RpZmljYXRpb25Jc0FjdGl2ZTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbm90aWZpY2F0aW9uJykpIHtcbiAgICAgICAgICBpdHNOb3RpZmljYXRpb24gPSB0YXJnZXQgPT09IG5vdGlmaWNhdGlvbiB8fCBub3RpZmljYXRpb24uY29udGFpbnModGFyZ2V0KTtcbiAgICAgICAgICBpdHNOb3RpZmljYXRpb25CdXR0b24gPSB0YXJnZXQgPT09IG5vdGlmaWNhdGlvbkJ1dHRvbjtcbiAgICAgICAgICBub3RpZmljYXRpb25Jc0FjdGl2ZSA9IG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpdHNMaXN0LCBpdHNMaXN0QnV0dG9uLCBsaXN0SXNBY3RpdmU7XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MnKSkge1xuICAgICAgICAgIGl0c0xpc3QgPSB0YXJnZXQgPT09IG5hdkxpc3QgfHwgbmF2TGlzdC5jb250YWlucyh0YXJnZXQpO1xuICAgICAgICAgIGl0c0xpc3RCdXR0b24gPSB0YXJnZXQgPT09IG5hdkJ1dHRvbjtcbiAgICAgICAgICBsaXN0SXNBY3RpdmUgPSBuYXZMaXN0LmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGl0c1NoYXJlTGlzdCwgaXRzU2hhcmVMaXN0QnV0dG9uLCBzaGFyZUxpc3RJc0FjdGl2ZTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlIC5zaGFyZScpKSB7XG4gICAgICAgICAgaXRzU2hhcmVMaXN0ID0gdGFyZ2V0ID09PSBzaGFyZUxpc3QgfHwgc2hhcmVMaXN0LmNvbnRhaW5zKHRhcmdldCk7XG4gICAgICAgICAgaXRzU2hhcmVMaXN0QnV0dG9uID0gdGFyZ2V0ID09PSBzaGFyZUJ1dHRvbjtcbiAgICAgICAgICBzaGFyZUxpc3RJc0FjdGl2ZSA9IHNoYXJlTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX21lbnUnKSAmJiAhaXRzTWVudSAmJiAhaXRzTWVudUJ1dHRvbiAmJiBtZW51SXNBY3RpdmUpIHtcbiAgICAgICAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9sYW5ndWFnZScpICYmICFpdHNMYW5ndWFnZSAmJiAhaXRzTGFuZ3VhZ2VCdXR0b24gJiYgbGFuZ3VhZ2VJc0FjdGl2ZSkge1xuICAgICAgICAgIGxhbmd1YWdlLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9ub3RpZmljYXRpb24nKSAmJiAhaXRzTm90aWZpY2F0aW9uICYmICFpdHNOb3RpZmljYXRpb25CdXR0b24gJiYgbm90aWZpY2F0aW9uSXNBY3RpdmUpIHtcbiAgICAgICAgICBub3RpZmljYXRpb24uY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MnKSAmJiAhaXRzTGlzdCAmJiAhaXRzTGlzdEJ1dHRvbiAmJiBsaXN0SXNBY3RpdmUpIHtcbiAgICAgICAgICBuYXZMaXN0LmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZSAuc2hhcmUnKSwgc2hhcmVMaXN0LCAhaXRzU2hhcmVMaXN0LCAhaXRzU2hhcmVMaXN0QnV0dG9uLCBzaGFyZUxpc3RJc0FjdGl2ZSk7XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZSAuc2hhcmUnKSAmJiAhaXRzU2hhcmVMaXN0ICYmICFpdHNTaGFyZUxpc3RCdXR0b24gJiYgc2hhcmVMaXN0SXNBY3RpdmUpIHtcbiAgICAgICAgICBzaGFyZUxpc3QuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGxldCBhcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKSxcbiAgICAgICAgYXJ0aWNsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGVfaW1hZ2UnKTtcbiAgICBpZiAoYXJ0aWNsZSkge1xuICAgICAgY29uc29sZS5sb2coYXJ0aWNsZUltYWdlLm9mZnNldFdpZHRoLCBhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0KTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlX2ltYWdlLXBpY3R1cmUnKS5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUud2lkdGggPSAnYXV0byc7XG4gICAgICBpZiAoKHdpbmRvdy5pbm5lcldpZHRoID4gd2luZG93LmlubmVySGVpZ2h0KSAmJiAod2luZG93LmlubmVyV2lkdGggPiAxMDI0KSkge1xuICAgICAgICBsZXQgcGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlX2ltYWdlLXBpY3R1cmUnKSxcbiAgICAgICAgICBjYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGVfaW1hZ2UtY2FwdGlvbicpLFxuICAgICAgICAgIHBpY3R1cmVIZWlnaHQsIHBpY3R1cmVXaWR0aDtcbiAgICAgICAgcGljdHVyZS5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgIGlmICgoKGFydGljbGUub2Zmc2V0V2lkdGggLyAyKSA8IChhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy53cmFwcGVyJykub2Zmc2V0V2lkdGgpKSAmJiAoYXJ0aWNsZS5vZmZzZXRXaWR0aCA8IDExMDApKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ3RhYmxldCBsYW5kc2NhcGUnKTtcbiAgICAgICAgICBpZiAoKHBpY3R1cmUub2Zmc2V0SGVpZ2h0ICsgY2FwdGlvbi5vZmZzZXRIZWlnaHQgKyA4MCkgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgICAgICAgIHBpY3R1cmVXaWR0aCA9IChhcnRpY2xlLm9mZnNldFdpZHRoIC8gMikgLSAxMjA7XG4gICAgICAgICAgICBwaWN0dXJlSGVpZ2h0ID0gcGljdHVyZVdpZHRoIC8gMTAyICogMTUzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwaWN0dXJlLnN0eWxlLmhlaWdodCA9IChhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0IC0gY2FwdGlvbi5vZmZzZXRIZWlnaHQpICsgJ3B4JztcbiAgICAgICAgICAgIHBpY3R1cmVIZWlnaHQgPSBwaWN0dXJlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIHBpY3R1cmVXaWR0aCA9IHBpY3R1cmVIZWlnaHQgLyAxNTMgKiAxMDI7XG4gICAgICAgICAgfVxuICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLndpZHRoID0gcGljdHVyZVdpZHRoICsgJ3B4JztcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZScpLnN0eWxlLnBhZGRpbmdMZWZ0ID0gcGljdHVyZVdpZHRoICsgNDAgKyAncHgnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICgocGljdHVyZS5vZmZzZXRIZWlnaHQgKyBjYXB0aW9uLm9mZnNldEhlaWdodCArIDgwKSA+IHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgICAgICAgICAgcGljdHVyZS5zdHlsZS5oZWlnaHQgPSAoYXJ0aWNsZUltYWdlLm9mZnNldEhlaWdodCAtIGNhcHRpb24ub2Zmc2V0SGVpZ2h0KSArICdweCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBpY3R1cmVIZWlnaHQgPSBwaWN0dXJlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICBwaWN0dXJlV2lkdGggPSBwaWN0dXJlSGVpZ2h0IC8gMTUzICogMTAyO1xuICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9IHBpY3R1cmVXaWR0aCArICdweCc7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKS5zdHlsZS5wYWRkaW5nTGVmdCA9IHBpY3R1cmVXaWR0aCArIDQwICsgJ3B4JztcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3VycmVudFBhZ2VZUG9zaXRpb24gPSAwLCBiYW5uZXJzU2Nyb2xsID0gMDtcbiAgICAgICAgZG9jdW1lbnQub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlJykpIHtcbiAgICAgICAgICAgIGxldCBhcnRpY2xlSGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VjdGlvbi5hcnRpY2xlJykub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICBoZWFkZXJIZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJykub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICBsZXQgYmFubmVyc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW5uZXJzX2NvbnRhaW5lcicpLFxuICAgICAgICAgICAgICBiYW5uZXJzQ29udGFpbmVySGVpZ2h0ID0gYmFubmVyc0NvbnRhaW5lci5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgIGJhbm5lcnNXcmFwcGVySGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhbm5lcnNfd3JhcHBlcicpLm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgICAgY29udGVudEhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jykub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICBibG9ja3NEaWZmZXJlbmNlID0gKGNvbnRlbnRIZWlnaHQpIC8gKGJhbm5lcnNDb250YWluZXJIZWlnaHQgLSBiYW5uZXJzV3JhcHBlckhlaWdodCArIDE0MCksXG4gICAgICAgICAgICAgIHNjcm9sbERpZmZlcmVuY2UgPSBwYWdlWU9mZnNldCAtIGN1cnJlbnRQYWdlWVBvc2l0aW9uLCBiYW5uZXJzU2Nyb2xsTmV3O1xuICAgICAgICAgICAgaWYgKChiYW5uZXJzQ29udGFpbmVySGVpZ2h0IC0gYmFubmVyc1dyYXBwZXJIZWlnaHQpID4gMCkge1xuICAgICAgICAgICAgICBiYW5uZXJzU2Nyb2xsTmV3ID0gc2Nyb2xsRGlmZmVyZW5jZSAvIGJsb2Nrc0RpZmZlcmVuY2U7XG4gICAgICAgICAgICAgIGJhbm5lcnNTY3JvbGwgPSBiYW5uZXJzU2Nyb2xsICsgYmFubmVyc1Njcm9sbE5ldztcbiAgICAgICAgICAgICAgaWYgKChiYW5uZXJzQ29udGFpbmVySGVpZ2h0IC0gYmFubmVyc1dyYXBwZXJIZWlnaHQpID4gYmFubmVyc1Njcm9sbCkge1xuICAgICAgICAgICAgICAgIGJhbm5lcnNDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoJyArIChiYW5uZXJzU2Nyb2xsICAqIC0xKSArICdweCknO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKChiYW5uZXJzQ29udGFpbmVySGVpZ2h0IC0gYmFubmVyc1dyYXBwZXJIZWlnaHQpIDw9IGJhbm5lcnNTY3JvbGwpIHtcbiAgICAgICAgICAgICAgICBiYW5uZXJzQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKCcgKyAoKGJhbm5lcnNDb250YWluZXJIZWlnaHQgLSBiYW5uZXJzV3JhcHBlckhlaWdodCkgICogLTEpICsgJ3B4KSc7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmFubmVyc1Njcm9sbCA8IDApIHtcbiAgICAgICAgICAgICAgICBiYW5uZXJzQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKCcgKyAwICsgJ3B4KSc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2VZT2Zmc2V0LCBhcnRpY2xlSGVpZ2h0ICsgaGVhZGVySGVpZ2h0IC0gODAgLSBhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFydGljbGVIZWlnaHQsIGhlYWRlckhlaWdodCwgYXJ0aWNsZUltYWdlLm9mZnNldEhlaWdodCk7XG4gICAgICAgICAgICBpZiAoKHBhZ2VZT2Zmc2V0ID4gNzMpICYmIChwYWdlWU9mZnNldCA8IChoZWFkZXJIZWlnaHQgKyBhcnRpY2xlSGVpZ2h0IC0gODAgLSAoYXJ0aWNsZUltYWdlLm9mZnNldEhlaWdodCArIDQwKSkpKSB7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS50b3AgPSAnNDBweCc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS5ib3R0b20gPSAnYXV0byc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9IGFydGljbGVJbWFnZS5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChwYWdlWU9mZnNldCA+IDczKSAmJiAocGFnZVlPZmZzZXQgPj0gKGhlYWRlckhlaWdodCArIGFydGljbGVIZWlnaHQgLSA4MCAtIChhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0ICsgNDApKSkpIHtcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnRvcCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLmJvdHRvbSA9ICc4MHB4JztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLndpZHRoID0gYXJ0aWNsZUltYWdlLm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS50b3AgPSAnNDBweCc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS5ib3R0b20gPSAnYXV0byc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9IGFydGljbGVJbWFnZS5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1cnJlbnRQYWdlWVBvc2l0aW9uID0gcGFnZVlPZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcxNnB4JztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBuZXcgU3RhcnRTY3JpcHRzKCk7XG5cbiAgd2luZG93Lm9ucmVzaXplID0gU3RhcnRTY3JpcHRzO1xufSk7XG5cblxuLy8gLy8g0JXRgdC70Lgg0LTQvtC70LbQtdC9INCx0YvRgtGMINC90LDQudC00LXQvSDQvtC00LjQvSDRjdC70LXQvNC10L3RglxuLy8gaWYoKGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1cIikpICE9PSBudWxsKVxuLy8gICBlLmNsYXNzTGlzdC5hZGQoJ2xhc3QnKTsgLy8g0JDQvdCw0LvQvtCzINCy0YvQsdC+0YDQutC4INC4INC/0YDQuNGB0LLQvtC10L3QuNGPINC60LvQsNGB0YHQsFxuLy8gLy8g0JXRgdC70Lgg0Y3Qu9C10LzQtdC90YLQvtCyINCx0YPQtNC10YIg0LzQvdC+0LPQvlxuLy8gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI2Zvcm1cIiksIGZ1bmN0aW9uKGUpe1xuLy8gICBlLmNsYXNzTGlzdC5hZGQoJ2xhc3QnKTtcbi8vIH0pO1xuIl19
