/*!
 * gulp-nunjucks-sass-template
 * A Gulp 4 template including SCSS, Nunjucks, JS and more
 *
 * Url: https://github.com/DefaultSimon
 * Author: Simon GoriÄar
 * Copyright 2019-2020. MIT licensed.
 */
document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".header_tags .tag");let t,o,n=[];function r(){if(console.log(window.innerWidth>=1024,window.innerWidth>window.innerHeight),document.querySelector(".compilation")){let e,t,o,n=document.querySelectorAll(".compilation .item");window.innerWidth<1024&&window.innerWidth<window.innerHeight?(e=n[0].querySelector(".item_image").offsetWidth,t=e/2*3,Array.prototype.forEach.call(n,function(e){e.querySelector(".item_image").style.height=t+"px"})):(e=n[0].offsetWidth,t=n[0].classList.contains("wide")?(e-40)/151*106:(e-40)/53*76,Array.prototype.forEach.call(n,function(e){let n=e.querySelector(".item_image");o=e.querySelector(".item_tags"),n.style.height=t+"px",o.style.top=t+"px"}))}function r(e,t){t.onclick=(()=>new function(){e.classList.toggle("open")})}if(document.querySelector("#copyLink")&&document.querySelector("#copyLink").addEventListener("click",()=>{let e=document.createElement("input"),t=window.location.href;document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}),document.querySelector(".header_tags")){let r=document.querySelector(".header_tags"),c=document.querySelector(".header_tags .tag_list"),l=document.querySelector(".header_tags .tag-wrapper"),s=0,a=r.offsetWidth,d=l.offsetWidth,u=0,f=Array.prototype.slice.call(e),y=n.slice();function i(e){if(u=d-24,document.querySelector(".header_tags .tag.current"))do{u+=y[e],e++}while(u<=a-d-24-26&&e<f.length);else do{u+=y[e],e++}while(u<=a-d-24&&e<f.length);return e}s=i(s);let p=document.querySelectorAll(".header_tags .tag");if(t){if(o()>s){let e=y[o()];f.splice(o(),1),y.splice(o(),1);let n=s-1;f.splice(n,0,t),y.splice(n,0,e)}s=i(s=0)}Array.prototype.forEach.call(p,function(e){e.remove()});for(let e=0;e<s;e++)l.before(f[e]);for(let e=s;e<f.length;e++)c.append(f[e]);r.style.flexWrap="nowrap"}if(document.querySelector(".header_tags")){const e=document.querySelector(".header_menu"),t=e.querySelector(".menu"),o=e.querySelector(".btn-icon");new r(t,o);const n=document.querySelector(".header_language"),i=n.querySelector(".language"),c=n.querySelector(".btn-icon");new r(i,c);const l=document.querySelector(".header_notification"),s=l.querySelector(".notification"),a=l.querySelector(".btn-icon");new r(s,a);const d=document.querySelector(".header_tags .tag-wrapper"),u=d.querySelector(".tag_list"),f=d.querySelector(".tag-button");new r(u,f),document.onclick=(e=>{let n=e.target,r=n===t||t.contains(n),l=n===o,d=t.classList.contains("open"),y=n===i||i.contains(n),p=n===c,g=i.classList.contains("open"),h=n===s||s.contains(n),m=n===a,q=s.classList.contains("open"),S=n===u||u.contains(n),w=n===f,_=u.classList.contains("open");r||l||!d||t.classList.toggle("open"),y||p||!g||i.classList.toggle("open"),h||m||!q||s.classList.toggle("open"),S||w||!_||u.classList.toggle("open")})}let c=document.querySelector(".article"),l=document.querySelector(".article_image");if(c)if(window.innerWidth>window.innerHeight){let e,t,o=document.querySelector(".article_image-picture"),n=document.querySelector(".article_image-caption");o.style.height="",c.offsetWidth/2<c.querySelector(".wrapper").offsetWidth&&c.offsetWidth<1100?(console.log("tablet landscape"),o.offsetHeight+n.offsetHeight+80>window.innerHeight?e=(t=c.offsetWidth/2-120)/102*153:(o.style.height=l.offsetHeight-n.offsetHeight+"px",t=(e=o.offsetHeight)/153*102),l.style.width=t+"px",document.querySelector(".article").style.paddingLeft=t+40+"px"):(o.offsetHeight+n.offsetHeight+80>window.innerHeight&&(o.style.height=l.offsetHeight-n.offsetHeight+"px"),t=(e=o.offsetHeight)/153*102,l.style.width=t+"px",document.querySelector(".article").style.paddingLeft=t+40+"px");let r=0,i=0;document.onscroll=function(){if(document.querySelector(".article")){let e,t=document.querySelector("section.article").offsetHeight,o=document.querySelector(".header").offsetHeight,n=document.querySelector(".banners_container"),c=n.offsetHeight,s=document.querySelector(".banners_wrapper").offsetHeight,a=document.querySelector(".content").offsetHeight,d=pageYOffset-r;c-s>0&&(c-s>(i+=e=d/(a/(c-s+140)))?n.style.transform="translateY("+-1*i+"px)":c-s<=i?n.style.transform="translateY("+-1*(c-s)+"px)":i<0&&(n.style.transform="translateY(0px)")),pageYOffset>40&&pageYOffset<t+o-l.offsetHeight-100?(l.style.position="fixed",l.style.top="40px",l.style.bottom="auto",l.style.width=l.offsetWidth+"px"):pageYOffset>40&&pageYOffset>t+o-l.offsetHeight-100?(l.style.position="absolute",l.style.top="auto",l.style.bottom="80px",l.style.width=l.offsetWidth+"px"):(l.style.position="absolute",l.style.top="40px",l.style.bottom="auto",l.style.width=l.offsetWidth+"px"),r=pageYOffset}}}else document.querySelector(".article").style.paddingLeft="16px"}document.querySelector(".header_tags")&&(Array.prototype.forEach.call(e,function(e){n.push(e.offsetWidth+12)}),t=document.querySelector(".header_tags .tag.current"),o=function(){if(null!==t)return Array.prototype.slice.call(e).indexOf(t)}),new r,window.onresize=r});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidGFnc0xpc3REZWZhdWx0IiwicXVlcnlTZWxlY3RvckFsbCIsImN1cnJlbnRUYWciLCJjdXJyZW50VGFnSW5kZXgiLCJ0YWdzV2lkdGhMaXN0RGVmYXVsdCIsIlN0YXJ0U2NyaXB0cyIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJxdWVyeVNlbGVjdG9yIiwiaXRlbVdpZHRoIiwiaW1hZ2VIZWlnaHQiLCJpdGVtVGFncyIsIml0ZW1zT25QYWdlIiwib2Zmc2V0V2lkdGgiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsIiwiZWxlbSIsInN0eWxlIiwiaGVpZ2h0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbWFnZSIsInRvcCIsIlRvZ2dsZUJsb2NrIiwiYmxvY2siLCJidXR0b24iLCJvbmNsaWNrIiwidG9nZ2xlIiwiZHVtbXkiLCJjcmVhdGVFbGVtZW50IiwidGV4dCIsImxvY2F0aW9uIiwiaHJlZiIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInZhbHVlIiwic2VsZWN0IiwiZXhlY0NvbW1hbmQiLCJyZW1vdmVDaGlsZCIsInRhZ05hdiIsInRhZ01vcmVMaXN0IiwidGFnTW9yZUJ1dHRvbiIsImkiLCJ0YWdOYXZXaWR0aCIsInRhZ01vcmVCdXR0b25XaWR0aCIsInRhZ3NWaXNpYmxlV2lkdGgiLCJ0YWdzTGlzdCIsInNsaWNlIiwidGFnc1dpZHRoTGlzdCIsIkZpbmRUYWdzVmlzaWJsZVdpZHRoIiwiaW5kZXgiLCJsZW5ndGgiLCJhbGxOYXZUYWdzIiwiY3VycmVudFRhZ1dpZHRoIiwic3BsaWNlIiwiayIsInJlbW92ZSIsImIiLCJiZWZvcmUiLCJsIiwiYXBwZW5kIiwiZmxleFdyYXAiLCJtZW51V3JhcHBlciIsIm1lbnUiLCJtZW51QnV0dG9uIiwibGFuZ3VhZ2VXcmFwcGVyIiwibGFuZ3VhZ2UiLCJsYW5ndWFnZUJ1dHRvbiIsIm5vdGlmaWNhdGlvbldyYXBwZXIiLCJub3RpZmljYXRpb24iLCJub3RpZmljYXRpb25CdXR0b24iLCJuYXZXcmFwcGVyIiwibmF2TGlzdCIsIm5hdkJ1dHRvbiIsImUiLCJ0YXJnZXQiLCJpdHNNZW51IiwiaXRzTWVudUJ1dHRvbiIsIm1lbnVJc0FjdGl2ZSIsIml0c0xhbmd1YWdlIiwiaXRzTGFuZ3VhZ2VCdXR0b24iLCJsYW5ndWFnZUlzQWN0aXZlIiwiaXRzTm90aWZpY2F0aW9uIiwiaXRzTm90aWZpY2F0aW9uQnV0dG9uIiwibm90aWZpY2F0aW9uSXNBY3RpdmUiLCJpdHNMaXN0IiwiaXRzTGlzdEJ1dHRvbiIsImxpc3RJc0FjdGl2ZSIsImFydGljbGUiLCJhcnRpY2xlSW1hZ2UiLCJwaWN0dXJlSGVpZ2h0IiwicGljdHVyZVdpZHRoIiwicGljdHVyZSIsImNhcHRpb24iLCJvZmZzZXRIZWlnaHQiLCJ3aWR0aCIsInBhZGRpbmdMZWZ0IiwiY3VycmVudFBhZ2VZUG9zaXRpb24iLCJiYW5uZXJzU2Nyb2xsIiwib25zY3JvbGwiLCJiYW5uZXJzU2Nyb2xsTmV3IiwiYXJ0aWNsZUhlaWdodCIsImhlYWRlckhlaWdodCIsImJhbm5lcnNDb250YWluZXIiLCJiYW5uZXJzQ29udGFpbmVySGVpZ2h0IiwiYmFubmVyc1dyYXBwZXJIZWlnaHQiLCJjb250ZW50SGVpZ2h0Iiwic2Nyb2xsRGlmZmVyZW5jZSIsInBhZ2VZT2Zmc2V0IiwidHJhbnNmb3JtIiwicG9zaXRpb24iLCJib3R0b20iLCJwdXNoIiwiaW5kZXhPZiIsIm9ucmVzaXplIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBQSxTQUFBQyxpQkFBQSxtQkFBQSxXQUNBLE1BQUFDLEVBQUFGLFNBQUFHLGlCQUFBLHFCQUNBLElBQUFDLEVBQUFDLEVBQUFDLEtBS0EsU0FBQUMsSUFHQSxHQUZBQyxRQUFBQyxJQUFBQyxPQUFBQyxZQUFBLEtBQUFELE9BQUFDLFdBQUFELE9BQUFFLGFBRUFaLFNBQUFhLGNBQUEs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QWpCLEVBQUFpSCxLQUFBaEcsRUFBQUwsWUFBQSxNQU5BZCxFQUFBSixTQUFBYSxjQUFBLDZCQUNBUixFQUFBLFdBQ0EsR0FBQSxPQUFBRCxFQUNBLE9BQUFlLE1BQUFDLFVBQUFrQyxNQUFBaEMsS0FBQXBCLEdBQUFzSCxRQUFBcEgsS0F1T0EsSUFBQUcsRUFFQUcsT0FBQStHLFNBQUFsSCIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vINCQ0L3QsNC70L7QsyAkKGRvY3VtZW50KS5yZWFkeSgpXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHRhZ3NMaXN0RGVmYXVsdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfdGFncyAudGFnJyk7XG4gIGxldCB0YWdzV2lkdGhMaXN0RGVmYXVsdCA9IFtdLCBjdXJyZW50VGFnLCBjdXJyZW50VGFnSW5kZXg7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MnKSkge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGFnc0xpc3REZWZhdWx0LCBmdW5jdGlvbihlbGVtKSB7XG4gICAgICB0YWdzV2lkdGhMaXN0RGVmYXVsdC5wdXNoKCBlbGVtLm9mZnNldFdpZHRoICsgMTIgKTtcbiAgICB9KTtcbiAgICBjdXJyZW50VGFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzIC50YWcuY3VycmVudCcpO1xuICAgIGN1cnJlbnRUYWdJbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGN1cnJlbnRUYWcgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRhZ3NMaXN0RGVmYXVsdCkuaW5kZXhPZihjdXJyZW50VGFnKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gU3RhcnRTY3JpcHRzKCkge1xuICAgIGNvbnNvbGUubG9nKCh3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMDI0KSwgKHdpbmRvdy5pbm5lcldpZHRoID4gd2luZG93LmlubmVySGVpZ2h0KSk7XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXBpbGF0aW9uJykpIHtcbiAgICAgIGxldCBpdGVtc09uUGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21waWxhdGlvbiAuaXRlbScpLCBpdGVtV2lkdGgsIGltYWdlSGVpZ2h0LCBpdGVtVGFncztcbiAgICAgIGlmICgod2luZG93LmlubmVyV2lkdGggPCAxMDI0KSAmJiAod2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQpKSB7IC8vcG9ydHJhaXRcbiAgICAgICAgaXRlbVdpZHRoID0gaXRlbXNPblBhZ2VbMF0ucXVlcnlTZWxlY3RvcignLml0ZW1faW1hZ2UnKS5vZmZzZXRXaWR0aDtcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSBpdGVtV2lkdGggLyAyICogMztcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtc09uUGFnZSwgZnVuY3Rpb24oZWxlbSl7XG4gICAgICAgICAgbGV0IGltYWdlID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuaXRlbV9pbWFnZScpO1xuICAgICAgICAgIGltYWdlLnN0eWxlLmhlaWdodCA9IGltYWdlSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtV2lkdGggPSBpdGVtc09uUGFnZVswXS5vZmZzZXRXaWR0aDtcbiAgICAgICAgaWYgKGl0ZW1zT25QYWdlWzBdLmNsYXNzTGlzdC5jb250YWlucygnd2lkZScpKSB7XG4gICAgICAgICAgaW1hZ2VIZWlnaHQgPSAoaXRlbVdpZHRoIC0gNDApIC8gMTUxICogMTA2O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGltYWdlSGVpZ2h0ID0gKGl0ZW1XaWR0aCAtIDQwKSAvIDUzICogNzY7XG4gICAgICAgIH1cbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtc09uUGFnZSwgZnVuY3Rpb24oZWxlbSl7XG4gICAgICAgICAgbGV0IGltYWdlID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuaXRlbV9pbWFnZScpO1xuICAgICAgICAgIGl0ZW1UYWdzID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuaXRlbV90YWdzJyk7XG4gICAgICAgICAgaW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gaW1hZ2VIZWlnaHQgKyAncHgnO1xuICAgICAgICAgIGl0ZW1UYWdzLnN0eWxlLnRvcCA9IGltYWdlSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb3B5TGluaycpKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29weUxpbmsnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbGV0IGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSxcbiAgICAgICAgICAgIHRleHQgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGR1bW15KTtcbiAgICAgICAgZHVtbXkudmFsdWUgPSB0ZXh0O1xuICAgICAgICBkdW1teS5zZWxlY3QoKTtcbiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkdW1teSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBUb2dnbGVCbG9jayhibG9jaywgYnV0dG9uKSB7XG4gICAgICBsZXQgVG9nZ2xlTWVudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBibG9jay5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICB9O1xuICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiAobmV3IFRvZ2dsZU1lbnUoKSk7XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncycpKSB7XG4gICAgICBsZXQgdGFnTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzJyksXG4gICAgICAgICAgdGFnTW9yZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MgLnRhZ19saXN0JyksXG4gICAgICAgICAgdGFnTW9yZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncyAudGFnLXdyYXBwZXInKSxcbiAgICAgICAgICBpID0gMCxcbiAgICAgICAgICB0YWdOYXZXaWR0aCA9IHRhZ05hdi5vZmZzZXRXaWR0aCxcbiAgICAgICAgICB0YWdNb3JlQnV0dG9uV2lkdGggPSB0YWdNb3JlQnV0dG9uLm9mZnNldFdpZHRoLFxuICAgICAgICAgIHRhZ3NWaXNpYmxlV2lkdGggPSAwLFxuICAgICAgICAgIHRhZ3NMaXN0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGFnc0xpc3REZWZhdWx0KSxcbiAgICAgICAgICB0YWdzV2lkdGhMaXN0ID0gdGFnc1dpZHRoTGlzdERlZmF1bHQuc2xpY2UoKTtcbiAgICAgIGZ1bmN0aW9uIEZpbmRUYWdzVmlzaWJsZVdpZHRoKGluZGV4KSB7XG4gICAgICAgIHRhZ3NWaXNpYmxlV2lkdGggPSB0YWdNb3JlQnV0dG9uV2lkdGggLSAyNDtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfdGFncyAudGFnLmN1cnJlbnQnKSkge1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIHRhZ3NWaXNpYmxlV2lkdGggPSB0YWdzVmlzaWJsZVdpZHRoICsgdGFnc1dpZHRoTGlzdFtpbmRleF07XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgIH0gd2hpbGUgKCh0YWdzVmlzaWJsZVdpZHRoIDw9ICh0YWdOYXZXaWR0aCAtIHRhZ01vcmVCdXR0b25XaWR0aCAtIDI0IC0gMjYpKSAmJiAoaW5kZXggPCB0YWdzTGlzdC5sZW5ndGgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICB0YWdzVmlzaWJsZVdpZHRoID0gdGFnc1Zpc2libGVXaWR0aCArIHRhZ3NXaWR0aExpc3RbaW5kZXhdO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICB9IHdoaWxlICgodGFnc1Zpc2libGVXaWR0aCA8PSAodGFnTmF2V2lkdGggLSB0YWdNb3JlQnV0dG9uV2lkdGggLSAyNCkpICYmIChpbmRleCA8IHRhZ3NMaXN0Lmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIGkgPSBGaW5kVGFnc1Zpc2libGVXaWR0aChpKTtcbiAgICAgIGxldCBhbGxOYXZUYWdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl90YWdzIC50YWcnKTtcbiAgICAgIGlmIChjdXJyZW50VGFnKSB7XG4gICAgICAgIGlmIChjdXJyZW50VGFnSW5kZXgoKSA+IGkpIHtcbiAgICAgICAgICBsZXQgY3VycmVudFRhZ1dpZHRoID0gdGFnc1dpZHRoTGlzdFtjdXJyZW50VGFnSW5kZXgoKV07XG4gICAgICAgICAgdGFnc0xpc3Quc3BsaWNlKGN1cnJlbnRUYWdJbmRleCgpLCAxKTtcbiAgICAgICAgICB0YWdzV2lkdGhMaXN0LnNwbGljZShjdXJyZW50VGFnSW5kZXgoKSwgMSk7XG4gICAgICAgICAgbGV0IGsgPSBpIC0gMTtcbiAgICAgICAgICB0YWdzTGlzdC5zcGxpY2UoaywgMCwgY3VycmVudFRhZyk7XG4gICAgICAgICAgdGFnc1dpZHRoTGlzdC5zcGxpY2UoaywgMCwgY3VycmVudFRhZ1dpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBpID0gMDtcbiAgICAgICAgaSA9IEZpbmRUYWdzVmlzaWJsZVdpZHRoKGkpO1xuICAgICAgfVxuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhbGxOYXZUYWdzLCBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBmb3IgKGxldCBiID0gMDsgYiA8IGk7IGIrKykge1xuICAgICAgICB0YWdNb3JlQnV0dG9uLmJlZm9yZSh0YWdzTGlzdFtiXSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBsID0gaTsgbCA8IHRhZ3NMaXN0Lmxlbmd0aDsgbCsrKSB7XG4gICAgICAgIHRhZ01vcmVMaXN0LmFwcGVuZCh0YWdzTGlzdFtsXSk7XG4gICAgICB9XG4gICAgICB0YWdOYXYuc3R5bGUuZmxleFdyYXAgPSAnbm93cmFwJztcbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl90YWdzJykpIHtcbiAgICAgIGNvbnN0IG1lbnVXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9tZW51JyksXG4gICAgICAgICAgICBtZW51ID0gbWVudVdyYXBwZXIucXVlcnlTZWxlY3RvcignLm1lbnUnKSxcbiAgICAgICAgICAgIG1lbnVCdXR0b24gPSBtZW51V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuYnRuLWljb24nKTtcbiAgICAgIG5ldyBUb2dnbGVCbG9jayhtZW51LCBtZW51QnV0dG9uKTtcbiAgICAgIGNvbnN0IGxhbmd1YWdlV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfbGFuZ3VhZ2UnKSxcbiAgICAgICAgICAgIGxhbmd1YWdlID0gbGFuZ3VhZ2VXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5sYW5ndWFnZScpLFxuICAgICAgICAgICAgbGFuZ3VhZ2VCdXR0b24gPSBsYW5ndWFnZVdyYXBwZXIucXVlcnlTZWxlY3RvcignLmJ0bi1pY29uJyk7XG4gICAgICBuZXcgVG9nZ2xlQmxvY2sobGFuZ3VhZ2UsIGxhbmd1YWdlQnV0dG9uKTtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX25vdGlmaWNhdGlvbicpLFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcubm90aWZpY2F0aW9uJyksXG4gICAgICAgICAgICBub3RpZmljYXRpb25CdXR0b24gPSBub3RpZmljYXRpb25XcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5idG4taWNvbicpO1xuICAgICAgbmV3IFRvZ2dsZUJsb2NrKG5vdGlmaWNhdGlvbiwgbm90aWZpY2F0aW9uQnV0dG9uKTtcbiAgICAgIGNvbnN0IG5hdldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX3RhZ3MgLnRhZy13cmFwcGVyJyksXG4gICAgICAgIG5hdkxpc3QgPSBuYXZXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy50YWdfbGlzdCcpLFxuICAgICAgICBuYXZCdXR0b24gPSBuYXZXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy50YWctYnV0dG9uJyk7XG4gICAgICBuZXcgVG9nZ2xlQmxvY2sobmF2TGlzdCwgbmF2QnV0dG9uKTtcblxuICAgICAgZG9jdW1lbnQub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldCxcbiAgICAgICAgICBpdHNNZW51ID0gdGFyZ2V0ID09PSBtZW51IHx8IG1lbnUuY29udGFpbnModGFyZ2V0KSxcbiAgICAgICAgICBpdHNNZW51QnV0dG9uID0gdGFyZ2V0ID09PSBtZW51QnV0dG9uLFxuICAgICAgICAgIG1lbnVJc0FjdGl2ZSA9IG1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJyksXG4gICAgICAgICAgaXRzTGFuZ3VhZ2UgPSB0YXJnZXQgPT09IGxhbmd1YWdlIHx8IGxhbmd1YWdlLmNvbnRhaW5zKHRhcmdldCksXG4gICAgICAgICAgaXRzTGFuZ3VhZ2VCdXR0b24gPSB0YXJnZXQgPT09IGxhbmd1YWdlQnV0dG9uLFxuICAgICAgICAgIGxhbmd1YWdlSXNBY3RpdmUgPSBsYW5ndWFnZS5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSxcbiAgICAgICAgICBpdHNOb3RpZmljYXRpb24gPSB0YXJnZXQgPT09IG5vdGlmaWNhdGlvbiB8fCBub3RpZmljYXRpb24uY29udGFpbnModGFyZ2V0KSxcbiAgICAgICAgICBpdHNOb3RpZmljYXRpb25CdXR0b24gPSB0YXJnZXQgPT09IG5vdGlmaWNhdGlvbkJ1dHRvbixcbiAgICAgICAgICBub3RpZmljYXRpb25Jc0FjdGl2ZSA9IG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSxcbiAgICAgICAgICBpdHNMaXN0ID0gdGFyZ2V0ID09PSBuYXZMaXN0IHx8IG5hdkxpc3QuY29udGFpbnModGFyZ2V0KSxcbiAgICAgICAgICBpdHNMaXN0QnV0dG9uID0gdGFyZ2V0ID09PSBuYXZCdXR0b24sXG4gICAgICAgICAgbGlzdElzQWN0aXZlID0gbmF2TGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKTtcblxuICAgICAgICBpZiAoIWl0c01lbnUgJiYgIWl0c01lbnVCdXR0b24gJiYgbWVudUlzQWN0aXZlKSB7XG4gICAgICAgICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpdHNMYW5ndWFnZSAmJiAhaXRzTGFuZ3VhZ2VCdXR0b24gJiYgbGFuZ3VhZ2VJc0FjdGl2ZSkge1xuICAgICAgICAgIGxhbmd1YWdlLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWl0c05vdGlmaWNhdGlvbiAmJiAhaXRzTm90aWZpY2F0aW9uQnV0dG9uICYmIG5vdGlmaWNhdGlvbklzQWN0aXZlKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWl0c0xpc3QgJiYgIWl0c0xpc3RCdXR0b24gJiYgbGlzdElzQWN0aXZlKSB7XG4gICAgICAgICAgbmF2TGlzdC5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgbGV0IGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZScpLFxuICAgICAgICBhcnRpY2xlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZV9pbWFnZScpO1xuICAgIGlmIChhcnRpY2xlKSB7XG4gICAgICBpZiAoKHdpbmRvdy5pbm5lcldpZHRoID4gd2luZG93LmlubmVySGVpZ2h0KSkge1xuICAgICAgICBsZXQgcGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlX2ltYWdlLXBpY3R1cmUnKSxcbiAgICAgICAgICBjYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGVfaW1hZ2UtY2FwdGlvbicpLFxuICAgICAgICAgIHBpY3R1cmVIZWlnaHQsIHBpY3R1cmVXaWR0aDtcbiAgICAgICAgcGljdHVyZS5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgaWYgKCgoYXJ0aWNsZS5vZmZzZXRXaWR0aCAvIDIpIDwgKGFydGljbGUucXVlcnlTZWxlY3RvcignLndyYXBwZXInKS5vZmZzZXRXaWR0aCkpICYmIChhcnRpY2xlLm9mZnNldFdpZHRoIDwgMTEwMCkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygndGFibGV0IGxhbmRzY2FwZScpO1xuICAgICAgICAgIGlmICgocGljdHVyZS5vZmZzZXRIZWlnaHQgKyBjYXB0aW9uLm9mZnNldEhlaWdodCArIDgwKSA+IHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgICAgICAgICAgcGljdHVyZVdpZHRoID0gKGFydGljbGUub2Zmc2V0V2lkdGggLyAyKSAtIDEyMDtcbiAgICAgICAgICAgIHBpY3R1cmVIZWlnaHQgPSBwaWN0dXJlV2lkdGggLyAxMDIgKiAxNTM7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBpY3R1cmUuc3R5bGUuaGVpZ2h0ID0gKGFydGljbGVJbWFnZS5vZmZzZXRIZWlnaHQgLSBjYXB0aW9uLm9mZnNldEhlaWdodCkgKyAncHgnO1xuICAgICAgICAgICAgcGljdHVyZUhlaWdodCA9IHBpY3R1cmUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgcGljdHVyZVdpZHRoID0gcGljdHVyZUhlaWdodCAvIDE1MyAqIDEwMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUud2lkdGggPSBwaWN0dXJlV2lkdGggKyAncHgnO1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlJykuc3R5bGUucGFkZGluZ0xlZnQgPSBwaWN0dXJlV2lkdGggKyA0MCArICdweCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKChwaWN0dXJlLm9mZnNldEhlaWdodCArIGNhcHRpb24ub2Zmc2V0SGVpZ2h0ICsgODApID4gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgICAgICBwaWN0dXJlLnN0eWxlLmhlaWdodCA9IChhcnRpY2xlSW1hZ2Uub2Zmc2V0SGVpZ2h0IC0gY2FwdGlvbi5vZmZzZXRIZWlnaHQpICsgJ3B4JztcbiAgICAgICAgICB9XG4gICAgICAgICAgcGljdHVyZUhlaWdodCA9IHBpY3R1cmUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgIHBpY3R1cmVXaWR0aCA9IHBpY3R1cmVIZWlnaHQgLyAxNTMgKiAxMDI7XG4gICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLndpZHRoID0gcGljdHVyZVdpZHRoICsgJ3B4JztcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZScpLnN0eWxlLnBhZGRpbmdMZWZ0ID0gcGljdHVyZVdpZHRoICsgNDAgKyAncHgnO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJyZW50UGFnZVlQb3NpdGlvbiA9IDAsIGJhbm5lcnNTY3JvbGwgPSAwO1xuICAgICAgICBkb2N1bWVudC5vbnNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUnKSkge1xuICAgICAgICAgICAgbGV0IGFydGljbGVIZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uLmFydGljbGUnKS5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgIGhlYWRlckhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgICAgIGxldCBiYW5uZXJzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhbm5lcnNfY29udGFpbmVyJyksXG4gICAgICAgICAgICAgIGJhbm5lcnNDb250YWluZXJIZWlnaHQgPSBiYW5uZXJzQ29udGFpbmVyLm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgICAgYmFubmVyc1dyYXBwZXJIZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFubmVyc193cmFwcGVyJykub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICBjb250ZW50SGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKS5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgIGJsb2Nrc0RpZmZlcmVuY2UgPSAoY29udGVudEhlaWdodCkgLyAoYmFubmVyc0NvbnRhaW5lckhlaWdodCAtIGJhbm5lcnNXcmFwcGVySGVpZ2h0ICsgMTQwKSxcbiAgICAgICAgICAgICAgc2Nyb2xsRGlmZmVyZW5jZSA9IHBhZ2VZT2Zmc2V0IC0gY3VycmVudFBhZ2VZUG9zaXRpb24sIGJhbm5lcnNTY3JvbGxOZXc7XG4gICAgICAgICAgICBpZiAoKGJhbm5lcnNDb250YWluZXJIZWlnaHQgLSBiYW5uZXJzV3JhcHBlckhlaWdodCkgPiAwKSB7XG4gICAgICAgICAgICAgIGJhbm5lcnNTY3JvbGxOZXcgPSBzY3JvbGxEaWZmZXJlbmNlIC8gYmxvY2tzRGlmZmVyZW5jZTtcbiAgICAgICAgICAgICAgYmFubmVyc1Njcm9sbCA9IGJhbm5lcnNTY3JvbGwgKyBiYW5uZXJzU2Nyb2xsTmV3O1xuICAgICAgICAgICAgICBpZiAoKGJhbm5lcnNDb250YWluZXJIZWlnaHQgLSBiYW5uZXJzV3JhcHBlckhlaWdodCkgPiBiYW5uZXJzU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgYmFubmVyc0NvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgnICsgKGJhbm5lcnNTY3JvbGwgICogLTEpICsgJ3B4KSc7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGJhbm5lcnNDb250YWluZXJIZWlnaHQgLSBiYW5uZXJzV3JhcHBlckhlaWdodCkgPD0gYmFubmVyc1Njcm9sbCkge1xuICAgICAgICAgICAgICAgIGJhbm5lcnNDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoJyArICgoYmFubmVyc0NvbnRhaW5lckhlaWdodCAtIGJhbm5lcnNXcmFwcGVySGVpZ2h0KSAgKiAtMSkgKyAncHgpJztcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChiYW5uZXJzU2Nyb2xsIDwgMCkge1xuICAgICAgICAgICAgICAgIGJhbm5lcnNDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoJyArIDAgKyAncHgpJztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoKHBhZ2VZT2Zmc2V0ID4gNDApICYmIChwYWdlWU9mZnNldCA8IChhcnRpY2xlSGVpZ2h0ICsgaGVhZGVySGVpZ2h0IC0gYXJ0aWNsZUltYWdlLm9mZnNldEhlaWdodCAtIDEwMCkpKSB7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS50b3AgPSAnNDBweCc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS5ib3R0b20gPSAnYXV0byc7XG4gICAgICAgICAgICAgIGFydGljbGVJbWFnZS5zdHlsZS53aWR0aCA9IGFydGljbGVJbWFnZS5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChwYWdlWU9mZnNldCA+IDQwKSAmJiAocGFnZVlPZmZzZXQgPiAoYXJ0aWNsZUhlaWdodCArIGhlYWRlckhlaWdodCAtIGFydGljbGVJbWFnZS5vZmZzZXRIZWlnaHQgLSAxMDApKSkge1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUudG9wID0gJ2F1dG8nO1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUuYm90dG9tID0gJzgwcHgnO1xuICAgICAgICAgICAgICBhcnRpY2xlSW1hZ2Uuc3R5bGUud2lkdGggPSBhcnRpY2xlSW1hZ2Uub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLnRvcCA9ICc0MHB4JztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLmJvdHRvbSA9ICdhdXRvJztcbiAgICAgICAgICAgICAgYXJ0aWNsZUltYWdlLnN0eWxlLndpZHRoID0gYXJ0aWNsZUltYWdlLm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VycmVudFBhZ2VZUG9zaXRpb24gPSBwYWdlWU9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZScpLnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzE2cHgnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5ldyBTdGFydFNjcmlwdHMoKTtcblxuICB3aW5kb3cub25yZXNpemUgPSBTdGFydFNjcmlwdHM7XG59KTtcblxuXG4vLyAvLyDQldGB0LvQuCDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0L3QsNC50LTQtdC9INC+0LTQuNC9INGN0LvQtdC80LXQvdGCXG4vLyBpZigoZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVwiKSkgIT09IG51bGwpXG4vLyAgIGUuY2xhc3NMaXN0LmFkZCgnbGFzdCcpOyAvLyDQkNC90LDQu9C+0LMg0LLRi9Cx0L7RgNC60Lgg0Lgg0L/RgNC40YHQstC+0LXQvdC40Y8g0LrQu9Cw0YHRgdCwXG4vLyAvLyDQldGB0LvQuCDRjdC70LXQvNC10L3RgtC+0LIg0LHRg9C00LXRgiDQvNC90L7Qs9C+XG4vLyBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjZm9ybVwiKSwgZnVuY3Rpb24oZSl7XG4vLyAgIGUuY2xhc3NMaXN0LmFkZCgnbGFzdCcpO1xuLy8gfSk7XG4iXX0=
